{
  "BillingDetails.vue": "<script setup lang=\"ts\">\ninterface Voice {\n  id: string\n  name: string\n  selected?: boolean\n  audioUrl?: string\n  isPlaying?: boolean\n}\n\nconst voices = ref<Voice[]>([\n  { id: '1', name: \"Terry's Voice\", selected: true, audioUrl: '', isPlaying: false },\n  { id: '2', name: \"Sarah's Voice\", selected: false, audioUrl: '', isPlaying: false }\n])\n\nconst selectedModel = ref('voice-clone')\nconst selectedLanguage = ref('English')\nconst selectedTone = ref('Professional')\nconst creditCost = ref(0.38)\nconst isCreatingSpeech = ref(false)\n\n// 当前播放的音频元素\nconst currentAudio = ref<HTMLAudioElement | null>(null)\nconst currentPlayingId = ref<string | null>(null)\n\nconst languages = ['English', 'Chinese', 'Spanish', 'French', 'German', 'Japanese', 'Korean']\nconst tones = ['Professional', 'Casual', 'Friendly', 'Formal', 'Enthusiastic']\n\n// 根据选择计算 credit 消耗\nconst calculateCreditCost = computed(() => {\n  switch (selectedModel.value) {\n    case 'microsoft':\n      return 0.1\n    case 'subeasy':\n      return 1.0\n    case 'voice-clone':\n      return 1.0\n    default:\n      return 0.38\n  }\n})\n\n// 获取选中的语音\nconst selectedVoice = computed(() => voices.value.find(v => v.selected))\n\n// 是否可以创建语音\nconst canCreateSpeech = computed(() => {\n  if (selectedModel.value === 'voice-clone') {\n    return selectedVoice.value !== undefined\n  }\n  return true\n})\n\nconst emit = defineEmits<{\n  (e: 'create-speech', data: { model: string; voice: Voice | undefined; language: string; tone: string }): void\n  (e: 'create-voice'): void\n  (e: 'play-voice', id: string): void\n  (e: 'delete-voice', id: string): void\n}>()\n\nfunction selectVoice(id: string) {\n  voices.value = voices.value.map(v => ({\n    ...v,\n    selected: v.id === id\n  }))\n}\n\n// 播放/暂停语音预览\nfunction togglePlayVoice(voice: Voice) {\n  // 如果有其他音频在播放，先停止\n  if (currentAudio.value && currentPlayingId.value !== voice.id) {\n    currentAudio.value.pause()\n    currentAudio.value = null\n    voices.value = voices.value.map(v => ({ ...v, isPlaying: false }))\n  }\n\n  // 如果当前语音正在播放，暂停它\n  if (currentPlayingId.value === voice.id && currentAudio.value) {\n    currentAudio.value.pause()\n    currentAudio.value = null\n    currentPlayingId.value = null\n    voices.value = voices.value.map(v => ({\n      ...v,\n      isPlaying: v.id === voice.id ? false : v.isPlaying\n    }))\n    return\n  }\n\n  // 如果有音频 URL，播放它\n  if (voice.audioUrl) {\n    const audio = new Audio(voice.audioUrl)\n    currentAudio.value = audio\n    currentPlayingId.value = voice.id\n\n    audio.onplay = () => {\n      voices.value = voices.value.map(v => ({\n        ...v,\n        isPlaying: v.id === voice.id\n      }))\n    }\n\n    audio.onended = () => {\n      voices.value = voices.value.map(v => ({\n        ...v,\n        isPlaying: false\n      }))\n      currentPlayingId.value = null\n      currentAudio.value = null\n    }\n\n    audio.onerror = () => {\n      voices.value = voices.value.map(v => ({\n        ...v,\n        isPlaying: false\n      }))\n      currentPlayingId.value = null\n      currentAudio.value = null\n    }\n\n    audio.play()\n  } else {\n    // 没有音频 URL，通知父组件\n    emit('play-voice', voice.id)\n  }\n}\n\n// 创建语音\nfunction handleCreateSpeech() {\n  if (!canCreateSpeech.value) return\n\n  isCreatingSpeech.value = true\n  emit('create-speech', {\n    model: selectedModel.value,\n    voice: selectedVoice.value,\n    language: selectedLanguage.value,\n    tone: selectedTone.value\n  })\n\n  // 模拟完成（实际项目中由父组件控制）\n  setTimeout(() => {\n    isCreatingSpeech.value = false\n  }, 2000)\n}\n\n// 删除语音\nfunction deleteVoice(id: string, event: MouseEvent) {\n  event.stopPropagation()\n\n  // 如果正在播放这个语音，先停止\n  if (currentPlayingId.value === id && currentAudio.value) {\n    currentAudio.value.pause()\n    currentAudio.value = null\n    currentPlayingId.value = null\n  }\n\n  voices.value = voices.value.filter(v => v.id !== id)\n  emit('delete-voice', id)\n}\n\n// 添加新语音（供父组件调用）\nfunction addVoice(voice: Voice) {\n  voices.value.push({ ...voice, selected: false, isPlaying: false })\n}\n\n// 组件卸载时清理\nonUnmounted(() => {\n  if (currentAudio.value) {\n    currentAudio.value.pause()\n    currentAudio.value = null\n  }\n})\n\n// 暴露方法给父组件\ndefineExpose({ addVoice })\n</script>\n\n<template>\n  <div class=\"w-[560px] bg-white rounded-[10px] overflow-hidden\">\n    <!-- Header -->\n    <div class=\"px-[30px] pt-4 pb-[13px]\">\n      <h1 class=\"text-[15px] font-semibold text-[#202123] font-['Reddit_Sans']\">\n        Dubbing Studio\n      </h1>\n    </div>\n\n    <!-- Divider -->\n    <div class=\"h-px bg-[#00000008] mx-0\" />\n\n    <!-- Model Section -->\n    <div class=\"px-[30px] pt-4\">\n      <h2 class=\"text-[15px] font-semibold text-[#202123] font-['Reddit_Sans'] mb-3\">\n        Model\n      </h2>\n\n      <!-- Model Cards -->\n      <div class=\"flex gap-[10px]\">\n        <!-- Microsoft -->\n        <button\n          class=\"w-[160px] h-[56px] rounded-lg flex flex-col justify-center px-[15px] py-[10px] transition-all\"\n          :class=\"[\n            selectedModel === 'microsoft'\n              ? 'bg-[#f4f7ff] border border-[#695fee]'\n              : 'bg-[#f4f7ff] border border-transparent'\n          ]\"\n          @click=\"selectedModel = 'microsoft'\"\n        >\n          <div class=\"flex items-center gap-1\">\n            <div class=\"w-4 h-4 flex items-center justify-center\">\n              <svg width=\"13\" height=\"13\" viewBox=\"0 0 13 13\" fill=\"none\">\n                <rect width=\"6.18\" height=\"6.18\" fill=\"#f25022\" />\n                <rect x=\"6.82\" width=\"6.18\" height=\"6.18\" fill=\"#7fba00\" />\n                <rect y=\"6.82\" width=\"6.18\" height=\"6.18\" fill=\"#00a4ef\" />\n                <rect x=\"6.82\" y=\"6.82\" width=\"6.18\" height=\"6.18\" fill=\"#ffb900\" />\n              </svg>\n            </div>\n            <span class=\"text-[13px] font-semibold text-[#21293c] font-['Reddit_Sans']\">Microsoft</span>\n          </div>\n          <span class=\"text-[12px] text-[#979797] font-['Reddit_Sans'] mt-[3px]\">0.1 credit/1k characters</span>\n        </button>\n\n        <!-- SubEasy AI -->\n        <button\n          class=\"w-[160px] h-[56px] rounded-lg flex flex-col justify-center px-[15px] py-[10px] transition-all\"\n          :class=\"[\n            selectedModel === 'subeasy'\n              ? 'bg-[#f4f7ff] border border-[#695fee]'\n              : 'bg-[#f4f7ff] border border-transparent'\n          ]\"\n          @click=\"selectedModel = 'subeasy'\"\n        >\n          <div class=\"flex items-center gap-1\">\n            <div class=\"w-4 h-4 flex items-center justify-center\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\n                <path d=\"M7.04 13.8L0.68 6.18\" stroke=\"#ab5bff\" stroke-width=\"2.82\" stroke-linecap=\"round\" />\n                <path d=\"M9.92 10.18L5.36 6.18\" stroke=\"#675bff\" stroke-width=\"2.82\" stroke-linecap=\"round\" />\n                <path d=\"M12.52 6.08L9.84 3.22\" stroke=\"#00bbf3\" stroke-width=\"2.82\" stroke-linecap=\"round\" />\n              </svg>\n            </div>\n            <span class=\"text-[13px] font-semibold text-[#21293c] font-['Reddit_Sans']\">SubEasy AI</span>\n            <span class=\"px-1.5 py-0.5 rounded-[3px] bg-[#ffc661] text-[9.5px] font-bold text-white\" />\n          </div>\n          <span class=\"text-[12px] text-[#979797] font-['Reddit_Sans'] mt-[3px]\">1 credit/1k characters</span>\n        </button>\n\n        <!-- Voice Clone -->\n        <button\n          class=\"w-[160px] h-[56px] rounded-lg flex flex-col justify-center px-[15px] py-[10px] transition-all\"\n          :class=\"[\n            selectedModel === 'voice-clone'\n              ? 'bg-[#f4f7ff] border border-[#695fee]'\n              : 'bg-[#f4f7ff] border border-transparent'\n          ]\"\n          @click=\"selectedModel = 'voice-clone'\"\n        >\n          <div class=\"flex items-center gap-1\">\n            <div class=\"w-4 h-4 flex items-center justify-center\">\n              <svg width=\"15\" height=\"15\" viewBox=\"0 0 15 15\" fill=\"none\">\n                <path d=\"M12.31 12.31L0 0L0 12.31L12.31 12.31Z\" fill=\"#eabfff\" />\n                <rect x=\"4.14\" y=\"4.14\" width=\"8.95\" height=\"8.95\" fill=\"white\" />\n                <path d=\"M12.31 12.31L2.69 2.69L2.69 12.31L12.31 12.31Z\" fill=\"#6666ff\" />\n              </svg>\n            </div>\n            <span\n              class=\"text-[13px] font-semibold font-['Reddit_Sans']\"\n              :class=\"selectedModel === 'voice-clone' ? 'text-[#695fee]' : 'text-[#21293c]'\"\n            >\n              Voice Clone\n            </span>\n            <span class=\"px-1 py-0.5 rounded-[3px] bg-[#ff506d] text-[9.5px] font-bold text-white\">NEW</span>\n          </div>\n          <span\n            class=\"text-[12px] font-['Reddit_Sans'] mt-[3px]\"\n            :class=\"selectedModel === 'voice-clone' ? 'text-[#695fee]' : 'text-[#979797]'\"\n          >\n            1 credit/1k characters\n          </span>\n        </button>\n      </div>\n    </div>\n\n    <!-- My Voices Section -->\n    <div class=\"px-[30px] pt-6\">\n      <div class=\"flex items-center justify-between mb-3\">\n        <h2 class=\"text-[15px] font-semibold text-[#202123] font-['Reddit_Sans']\">\n          My Voices\n        </h2>\n        <span class=\"text-xs text-[#979797] font-['Reddit_Sans']\">{{ voices.length }} voice(s)</span>\n      </div>\n\n      <!-- Voice List Card -->\n      <div class=\"w-[500px] bg-[#f7f9fe] rounded-lg border border-[#ecedef]\">\n        <!-- Voice Items -->\n        <template v-for=\"(voice, index) in voices\" :key=\"voice.id\">\n          <div class=\"w-full h-14 flex items-center px-4 group\">\n            <button\n              class=\"flex items-center flex-1 hover:opacity-80 transition-opacity\"\n              @click=\"selectVoice(voice.id)\"\n            >\n              <div\n                class=\"w-9 h-9 rounded-full flex items-center justify-center transition-all\"\n                :class=\"voice.selected ? 'bg-[#f4f7ff] border border-[#695fee]' : 'bg-[#f7f9fe] border border-[#d0d0d0]'\"\n              >\n                <UIcon\n                  name=\"i-lucide-audio-lines\"\n                  class=\"w-[18px] h-[18px]\"\n                  :class=\"[voice.selected ? 'text-[#695fee]' : 'text-[#979797]', { 'animate-pulse': voice.isPlaying }]\"\n                />\n              </div>\n              <span\n                class=\"ml-3 text-[13px] font-['Reddit_Sans']\"\n                :class=\"voice.selected ? 'text-[#695fee] font-semibold' : 'text-[#202123]'\"\n              >\n                {{ voice.name }}\n              </span>\n            </button>\n\n            <!-- Delete Button (shown on hover) -->\n            <button\n              class=\"w-7 h-7 rounded-full flex items-center justify-center cursor-pointer opacity-0 group-hover:opacity-100 hover:bg-[#ffebee] transition-all mr-2\"\n              title=\"Delete voice\"\n              @click=\"deleteVoice(voice.id, $event)\"\n            >\n              <UIcon name=\"i-lucide-trash-2\" class=\"w-3.5 h-3.5 text-[#e53935]\" />\n            </button>\n\n            <!-- Play/Pause Button -->\n            <button\n              class=\"w-8 h-8 rounded-full border flex items-center justify-center cursor-pointer active:scale-95 transition-all\"\n              :class=\"voice.isPlaying\n                ? 'border-[#e53935] bg-[#e53935]'\n                : 'border-[#695fee] hover:bg-[#695fee] group/play'\"\n              @click.stop=\"togglePlayVoice(voice)\"\n            >\n              <UIcon\n                :name=\"voice.isPlaying ? 'i-lucide-pause' : 'i-lucide-play'\"\n                class=\"w-4 h-4 transition-colors\"\n                :class=\"voice.isPlaying\n                  ? 'text-white'\n                  : 'text-[#695fee] group-hover/play:text-white'\"\n              />\n            </button>\n          </div>\n          <div v-if=\"index < voices.length - 1\" class=\"h-px bg-[#e5e5e5] mx-4\" />\n        </template>\n\n        <!-- Divider before Add -->\n        <div class=\"h-px bg-[#e5e5e5] mx-4\" />\n\n        <!-- Add New Voice -->\n        <button\n          class=\"w-full h-10 flex items-center justify-center text-[13px] text-[#979797] font-['Reddit_Sans'] hover:text-[#695fee] hover:bg-[#f0eeff] transition-colors rounded-b-lg\"\n          @click=\"emit('create-voice')\"\n        >\n          <UIcon name=\"i-lucide-plus\" class=\"w-4 h-4 mr-1.5\" />\n          Add new voice clone\n        </button>\n      </div>\n    </div>\n\n    <!-- Language Section -->\n    <div class=\"px-[30px] pt-6\">\n      <h2 class=\"text-[15px] font-semibold text-[#202123] font-['Reddit_Sans'] mb-3\">\n        Language\n      </h2>\n\n      <div class=\"relative\">\n        <select\n          v-model=\"selectedLanguage\"\n          class=\"w-[500px] h-10 px-4 bg-white rounded-lg border border-[#ecedef] text-[13px] font-semibold text-[#21293c] font-['Reddit_Sans'] appearance-none cursor-pointer focus:outline-none focus:border-[#695fee]\"\n        >\n          <option v-for=\"lang in languages\" :key=\"lang\" :value=\"lang\">{{ lang }}</option>\n        </select>\n        <div class=\"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none\">\n          <UIcon name=\"i-lucide-chevron-down\" class=\"w-4 h-4 text-[#202123]\" />\n        </div>\n      </div>\n    </div>\n\n    <!-- Tone Section -->\n    <div class=\"px-[30px] pt-6\">\n      <h2 class=\"text-[15px] font-semibold text-[#202123] font-['Reddit_Sans'] mb-3\">\n        Tone\n      </h2>\n\n      <div class=\"relative\">\n        <select\n          v-model=\"selectedTone\"\n          class=\"w-[500px] h-10 px-4 bg-white rounded-lg border border-[#ecedef] text-[13px] font-semibold text-[#21293c] font-['Reddit_Sans'] appearance-none cursor-pointer focus:outline-none focus:border-[#695fee]\"\n        >\n          <option v-for=\"tone in tones\" :key=\"tone\" :value=\"tone\">{{ tone }}</option>\n        </select>\n        <div class=\"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none\">\n          <UIcon name=\"i-lucide-chevron-down\" class=\"w-4 h-4 text-[#202123]\" />\n        </div>\n      </div>\n    </div>\n\n    <!-- Create Speech Button -->\n    <div class=\"px-[30px] pt-6 pb-6\">\n      <button\n        class=\"w-[500px] h-10 rounded-[18px] text-white text-[13px] font-semibold font-['Reddit_Sans'] flex items-center justify-center transition-all\"\n        :class=\"canCreateSpeech && !isCreatingSpeech\n          ? 'bg-[#695fee] hover:bg-[#5a4fdf] cursor-pointer active:scale-[0.98]'\n          : 'bg-[#c5c5c5] cursor-not-allowed'\"\n        :disabled=\"!canCreateSpeech || isCreatingSpeech\"\n        @click=\"handleCreateSpeech\"\n      >\n        <UIcon v-if=\"isCreatingSpeech\" name=\"i-lucide-loader-2\" class=\"w-4 h-4 mr-2 animate-spin\" />\n        {{ isCreatingSpeech ? 'Creating...' : `Create Speech (※ ${calculateCreditCost})` }}\n      </button>\n      <p v-if=\"selectedModel === 'voice-clone' && !selectedVoice\" class=\"text-xs text-[#e53935] mt-2 text-center font-['Reddit_Sans']\">\n        Please select a voice to create speech\n      </p>\n    </div>\n  </div>\n</template>\n",
  "BillingDetailsEmpty.vue": "<script setup lang=\"ts\">\nconst selectedModel = ref('voice-clone')\nconst isCreatingSpeech = ref(false)\n\n// 根据选择计算 credit 消耗\nconst creditCost = computed(() => {\n  switch (selectedModel.value) {\n    case 'microsoft':\n      return 0.1\n    case 'subeasy':\n      return 1.0\n    case 'voice-clone':\n      return 1.0\n    default:\n      return 0.38\n  }\n})\n\n// Voice Clone 模式下需要先创建语音\nconst canCreateSpeech = computed(() => {\n  return selectedModel.value !== 'voice-clone'\n})\n\nconst emit = defineEmits<{\n  (e: 'create-speech', data: { model: string; creditCost: number }): void\n  (e: 'create-voice'): void\n}>()\n\n// 创建语音\nconst handleCreateSpeech = () => {\n  if (!canCreateSpeech.value) return\n\n  isCreatingSpeech.value = true\n  emit('create-speech', {\n    model: selectedModel.value,\n    creditCost: creditCost.value\n  })\n\n  // 模拟完成\n  setTimeout(() => {\n    isCreatingSpeech.value = false\n  }, 2000)\n}\n</script>\n\n<template>\n  <div class=\"w-[560px] bg-white rounded-[10px] overflow-hidden\">\n    <!-- Header -->\n    <div class=\"px-[30px] pt-4 pb-[13px]\">\n      <h1 class=\"text-[15px] font-semibold text-[#202123] font-['Reddit_Sans']\">\n        Dubbing Studio\n      </h1>\n    </div>\n\n    <!-- Divider -->\n    <div class=\"h-px bg-[#00000008] mx-0\" />\n\n    <!-- Model Section -->\n    <div class=\"px-[30px] pt-4\">\n      <h2 class=\"text-[15px] font-semibold text-[#202123] font-['Reddit_Sans'] mb-3\">\n        Model\n      </h2>\n\n      <!-- Model Cards -->\n      <div class=\"flex gap-[10px]\">\n        <!-- Microsoft -->\n        <button\n          class=\"w-[160px] h-[56px] rounded-lg flex flex-col justify-center px-[15px] py-[10px] transition-all\"\n          :class=\"[\n            selectedModel === 'microsoft'\n              ? 'bg-[#f4f7ff] border border-[#695fee]'\n              : 'bg-[#f4f7ff] border border-transparent'\n          ]\"\n          @click=\"selectedModel = 'microsoft'\"\n        >\n          <div class=\"flex items-center gap-1\">\n            <div class=\"w-4 h-4 flex items-center justify-center\">\n              <svg width=\"13\" height=\"13\" viewBox=\"0 0 13 13\" fill=\"none\">\n                <rect width=\"6.18\" height=\"6.18\" fill=\"#f25022\" />\n                <rect x=\"6.82\" width=\"6.18\" height=\"6.18\" fill=\"#7fba00\" />\n                <rect y=\"6.82\" width=\"6.18\" height=\"6.18\" fill=\"#00a4ef\" />\n                <rect x=\"6.82\" y=\"6.82\" width=\"6.18\" height=\"6.18\" fill=\"#ffb900\" />\n              </svg>\n            </div>\n            <span class=\"text-[13px] font-semibold text-[#21293c] font-['Reddit_Sans']\">Microsoft</span>\n          </div>\n          <span class=\"text-[12px] text-[#979797] font-['Reddit_Sans'] mt-[3px]\">0.1 credit/1k characters</span>\n        </button>\n\n        <!-- SubEasy AI -->\n        <button\n          class=\"w-[160px] h-[56px] rounded-lg flex flex-col justify-center px-[15px] py-[10px] transition-all\"\n          :class=\"[\n            selectedModel === 'subeasy'\n              ? 'bg-[#f4f7ff] border border-[#695fee]'\n              : 'bg-[#f4f7ff] border border-transparent'\n          ]\"\n          @click=\"selectedModel = 'subeasy'\"\n        >\n          <div class=\"flex items-center gap-1\">\n            <div class=\"w-4 h-4 flex items-center justify-center\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\n                <path d=\"M7.04 13.8L0.68 6.18\" stroke=\"#ab5bff\" stroke-width=\"2.82\" stroke-linecap=\"round\" />\n                <path d=\"M9.92 10.18L5.36 6.18\" stroke=\"#675bff\" stroke-width=\"2.82\" stroke-linecap=\"round\" />\n                <path d=\"M12.52 6.08L9.84 3.22\" stroke=\"#00bbf3\" stroke-width=\"2.82\" stroke-linecap=\"round\" />\n              </svg>\n            </div>\n            <span class=\"text-[13px] font-semibold text-[#21293c] font-['Reddit_Sans']\">SubEasy AI</span>\n            <span class=\"px-1.5 py-0.5 rounded-[3px] bg-[#ffc661] text-[9.5px] font-bold text-white\" />\n          </div>\n          <span class=\"text-[12px] text-[#979797] font-['Reddit_Sans'] mt-[3px]\">1 credit/1k characters</span>\n        </button>\n\n        <!-- Voice Clone -->\n        <button\n          class=\"w-[160px] h-[56px] rounded-lg flex flex-col justify-center px-[15px] py-[10px] transition-all\"\n          :class=\"[\n            selectedModel === 'voice-clone'\n              ? 'bg-[#f4f7ff] border border-[#695fee]'\n              : 'bg-[#f4f7ff] border border-transparent'\n          ]\"\n          @click=\"selectedModel = 'voice-clone'\"\n        >\n          <div class=\"flex items-center gap-1\">\n            <div class=\"w-4 h-4 flex items-center justify-center\">\n              <svg width=\"15\" height=\"15\" viewBox=\"0 0 15 15\" fill=\"none\">\n                <path d=\"M12.31 12.31L0 0L0 12.31L12.31 12.31Z\" fill=\"#eabfff\" />\n                <rect x=\"4.14\" y=\"4.14\" width=\"8.95\" height=\"8.95\" fill=\"white\" />\n                <path d=\"M12.31 12.31L2.69 2.69L2.69 12.31L12.31 12.31Z\" fill=\"#6666ff\" />\n              </svg>\n            </div>\n            <span\n              class=\"text-[13px] font-semibold font-['Reddit_Sans']\"\n              :class=\"selectedModel === 'voice-clone' ? 'text-[#695fee]' : 'text-[#21293c]'\"\n            >\n              Voice Clone\n            </span>\n            <span class=\"px-1 py-0.5 rounded-[3px] bg-[#ff506d] text-[9.5px] font-bold text-white\">NEW</span>\n          </div>\n          <span\n            class=\"text-[12px] font-['Reddit_Sans'] mt-[3px]\"\n            :class=\"selectedModel === 'voice-clone' ? 'text-[#695fee]' : 'text-[#979797]'\"\n          >\n            1 credit/1k characters\n          </span>\n        </button>\n      </div>\n    </div>\n\n    <!-- My Voices Section -->\n    <div class=\"px-[30px] pt-6\">\n      <h2 class=\"text-[15px] font-semibold text-[#202123] font-['Reddit_Sans'] mb-3\">\n        My Voices\n      </h2>\n\n      <!-- Empty State Card -->\n      <div class=\"w-[500px] h-[195px] bg-[#f7f9fe] rounded-lg border border-[#ecedef] flex flex-col items-center justify-center\">\n        <button\n          class=\"w-12 h-12 rounded-full bg-[#f4f7ff] border border-[#695fee] flex items-center justify-center mb-[17px] hover:bg-[#eef1ff] transition-colors cursor-pointer\"\n          @click=\"emit('create-voice')\"\n        >\n          <UIcon name=\"i-lucide-plus\" class=\"w-6 h-6 text-[#695fee]\" />\n        </button>\n        <span class=\"text-[13px] text-[#979797] font-['Reddit_Sans']\">Create a new voice clone</span>\n      </div>\n    </div>\n\n    <!-- Create Speech Button -->\n    <div class=\"px-[30px] pt-6 pb-6\">\n      <button\n        class=\"w-[500px] h-10 rounded-[18px] text-white text-[13px] font-semibold font-['Reddit_Sans'] flex items-center justify-center transition-all\"\n        :class=\"canCreateSpeech && !isCreatingSpeech\n          ? 'bg-[#695fee] hover:bg-[#5a4fdf] cursor-pointer active:scale-[0.98]'\n          : 'bg-[#c5c5c5] cursor-not-allowed'\"\n        :disabled=\"!canCreateSpeech || isCreatingSpeech\"\n        @click=\"handleCreateSpeech\"\n      >\n        <UIcon v-if=\"isCreatingSpeech\" name=\"i-lucide-loader-2\" class=\"w-4 h-4 mr-2 animate-spin\" />\n        {{ isCreatingSpeech ? 'Creating...' : `Create Speech (※ ${creditCost})` }}\n      </button>\n    </div>\n  </div>\n</template>\n",
  "BuyClonesModal.vue": "<script setup lang=\"ts\">\ninterface ClonePackage {\n  id: string\n  name: string\n  price: string\n  priceValue: number\n  description: string\n  popular?: boolean\n}\n\nconst packages: ClonePackage[] = [\n  {\n    id: '1-clone',\n    name: '1 Voice Clone',\n    price: '$2.99',\n    priceValue: 2.99,\n    description: 'One-time purchase'\n  },\n  {\n    id: '3-clones',\n    name: '3 Voice Clones',\n    price: '$7.99',\n    priceValue: 7.99,\n    description: 'Save 11%',\n    popular: true\n  },\n  {\n    id: '5-clones',\n    name: '5 Voice Clones',\n    price: '$12.99',\n    priceValue: 12.99,\n    description: 'Save 13%'\n  }\n]\n\nconst selectedPackage = ref('3-clones')\nconst isPurchasing = ref(false)\nconst error = ref('')\n\nconst selectedPackageData = computed(() => packages.find(p => p.id === selectedPackage.value))\n\n// 计算节省信息\nconst savingsInfo = computed(() => {\n  const pkg = selectedPackageData.value\n  if (!pkg) return null\n\n  const cloneCount = parseInt(pkg.name.split(' ')[0]) || 1\n  const singlePrice = 2.99\n  const regularPrice = cloneCount * singlePrice\n  const savings = regularPrice - pkg.priceValue\n\n  return {\n    cloneCount,\n    regularPrice,\n    actualPrice: pkg.priceValue,\n    savings: savings > 0 ? savings : 0,\n    savingsPercent: savings > 0 ? Math.round((savings / regularPrice) * 100) : 0\n  }\n})\n\nconst emit = defineEmits<{\n  (e: 'close'): void\n  (e: 'back'): void\n  (e: 'purchase', data: { packageId: string; packageData: ClonePackage }): void\n}>()\n\n// 处理购买\nconst handlePurchase = async () => {\n  if (!selectedPackageData.value || isPurchasing.value) return\n\n  isPurchasing.value = true\n  error.value = ''\n\n  try {\n    // 模拟支付处理\n    await new Promise(resolve => setTimeout(resolve, 1000))\n\n    emit('purchase', {\n      packageId: selectedPackage.value,\n      packageData: selectedPackageData.value\n    })\n  } catch (e) {\n    error.value = 'Payment failed. Please try again.'\n    console.error(e)\n  } finally {\n    isPurchasing.value = false\n  }\n}\n</script>\n\n<template>\n  <div class=\"w-[420px] bg-white rounded-2xl overflow-hidden\">\n    <!-- Header -->\n    <div class=\"h-14 px-6 flex items-center border-b border-[#e5e5e5]\">\n      <button\n        class=\"text-[#202123] hover:text-[#695fee] transition-colors cursor-pointer\"\n        @click=\"emit('back')\"\n      >\n        <UIcon name=\"i-lucide-arrow-left\" class=\"w-4 h-4\" />\n      </button>\n      <h1 class=\"text-base font-semibold text-[#202123] font-['Reddit_Sans'] ml-3\">Buy Voice Clones</h1>\n      <button\n        class=\"ml-auto text-[#979797] hover:text-[#202123] transition-colors cursor-pointer\"\n        @click=\"emit('close')\"\n      >\n        <UIcon name=\"i-lucide-x\" class=\"w-5 h-5\" />\n      </button>\n    </div>\n\n    <!-- Content -->\n    <div class=\"px-6 py-5\">\n      <div class=\"flex flex-col gap-2\">\n        <!-- Package Cards -->\n        <button\n          v-for=\"pkg in packages\"\n          :key=\"pkg.id\"\n          class=\"relative w-full h-[72px] rounded-xl px-4 flex items-center transition-all cursor-pointer\"\n          :class=\"[\n            selectedPackage === pkg.id\n              ? 'bg-[#f0eeff] border-2 border-[#695fee]'\n              : 'bg-[#f7f9fe] border border-[#e5e5e5]'\n          ]\"\n          @click=\"selectedPackage = pkg.id\"\n        >\n          <!-- Popular Tag -->\n          <span\n            v-if=\"pkg.popular\"\n            class=\"absolute top-1.5 right-4 px-3 py-1 rounded-[10px] bg-[#695fee] text-white text-[10px] font-semibold\"\n          >\n            Popular\n          </span>\n\n          <!-- Radio -->\n          <div\n            class=\"w-5 h-5 rounded-full border-2 flex items-center justify-center shrink-0\"\n            :class=\"selectedPackage === pkg.id ? 'border-[#695fee] bg-[#695fee]' : 'border-[#d0d0d0] bg-white'\"\n          >\n            <div v-if=\"selectedPackage === pkg.id\" class=\"w-2 h-2 rounded-full bg-white\" />\n          </div>\n\n          <!-- Info -->\n          <div class=\"ml-3 flex-1 text-left\">\n            <p class=\"text-sm font-semibold text-[#202123] font-['Reddit_Sans']\">{{ pkg.name }}</p>\n            <p\n              class=\"text-xs font-['Reddit_Sans'] mt-0.5\"\n              :class=\"pkg.description.includes('Save') ? 'text-[#695fee] font-medium' : 'text-[#979797]'\"\n            >\n              {{ pkg.description }}\n            </p>\n          </div>\n\n          <!-- Price -->\n          <span class=\"text-base font-semibold text-[#202123] font-['Reddit_Sans'] shrink-0\">{{ pkg.price }}</span>\n        </button>\n      </div>\n    </div>\n\n    <!-- Error Message -->\n    <div v-if=\"error\" class=\"px-6 pb-2\">\n      <p class=\"text-xs text-[#e53935] font-['Reddit_Sans'] text-center\">{{ error }}</p>\n    </div>\n\n    <!-- Savings Badge (if applicable) -->\n    <div v-if=\"savingsInfo && savingsInfo.savings > 0\" class=\"px-6 pb-4\">\n      <div class=\"bg-[#f0eeff] rounded-lg p-2.5 flex items-center justify-center gap-2\">\n        <UIcon name=\"i-lucide-badge-percent\" class=\"w-4 h-4 text-[#695fee]\" />\n        <span class=\"text-sm text-[#695fee] font-medium font-['Reddit_Sans']\">\n          Save {{ savingsInfo.savingsPercent }}% (${{ savingsInfo.savings.toFixed(2) }} off)\n        </span>\n      </div>\n    </div>\n\n    <!-- Footer Button -->\n    <div class=\"px-6 pb-6\">\n      <button\n        class=\"w-full h-12 rounded-3xl bg-[#695fee] hover:bg-[#5a4fdf] text-white text-sm font-semibold font-['Reddit_Sans'] flex items-center justify-center cursor-pointer active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n        :disabled=\"isPurchasing\"\n        @click=\"handlePurchase\"\n      >\n        <UIcon v-if=\"isPurchasing\" name=\"i-lucide-loader-2\" class=\"w-4 h-4 mr-2 animate-spin\" />\n        {{ isPurchasing ? 'Processing Payment...' : `Purchase - ${selectedPackageData?.price}` }}\n      </button>\n      <p class=\"text-xs text-[#979797] text-center mt-3 font-['Reddit_Sans']\">\n        Secure payment powered by Stripe\n      </p>\n    </div>\n  </div>\n</template>\n",
  "DubbingStudio.vue": "<script setup lang=\"ts\">\ninterface Props {\n  availableClones?: number\n  totalClones?: number\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  availableClones: 2,\n  totalClones: 3\n})\n\n// 文件上传状态\nconst selectedFile = ref<File | null>(null)\nconst fileError = ref('')\nconst isDragging = ref(false)\n\n// 文件上传输入框引用\nconst fileInputRef = ref<HTMLInputElement | null>(null)\n\n// 支持的文件格式\nconst supportedFormats = ['audio/mpeg', 'audio/mp3', 'audio/wav', 'audio/x-wav', 'audio/m4a', 'audio/x-m4a', 'audio/mp4']\nconst maxFileSize = 50 * 1024 * 1024 // 50MB\n\n// 验证文本\nconst verificationText = ref('')\nconst maxChars = 200\n\n// 计算属性\nconst hasClones = computed(() => props.availableClones > 0)\nconst canPreview = computed(() => verificationText.value.length > 0 && hasClones.value)\n\nconst emit = defineEmits<{\n  (e: 'back'): void\n  (e: 'close'): void\n  (e: 'get-more'): void\n  (e: 'file-selected', file: File): void\n  (e: 'record-voice'): void\n  (e: 'preview-clone', data: { text: string }): void\n}>()\n\n// 验证文件\nconst validateFile = (file: File): string => {\n  // 检查文件类型\n  if (!supportedFormats.includes(file.type)) {\n    // 也检查扩展名作为备选\n    const ext = file.name.split('.').pop()?.toLowerCase()\n    if (!['mp3', 'wav', 'm4a'].includes(ext || '')) {\n      return 'Unsupported file format. Please upload MP3, WAV, or M4A files.'\n    }\n  }\n\n  // 检查文件大小\n  if (file.size > maxFileSize) {\n    return 'File too large. Maximum size is 50MB.'\n  }\n\n  return ''\n}\n\n// 处理文件选择\nconst handleFileSelect = (event: Event) => {\n  const input = event.target as HTMLInputElement\n  const file = input.files?.[0]\n\n  if (file) {\n    const error = validateFile(file)\n    if (error) {\n      fileError.value = error\n      selectedFile.value = null\n    } else {\n      fileError.value = ''\n      selectedFile.value = file\n      emit('file-selected', file)\n    }\n  }\n\n  // 重置 input 以便可以重新选择相同文件\n  input.value = ''\n}\n\n// 触发文件选择\nconst triggerFileSelect = () => {\n  fileInputRef.value?.click()\n}\n\n// 处理拖放\nconst handleDragEnter = (event: DragEvent) => {\n  event.preventDefault()\n  isDragging.value = true\n}\n\nconst handleDragLeave = (event: DragEvent) => {\n  event.preventDefault()\n  isDragging.value = false\n}\n\nconst handleDragOver = (event: DragEvent) => {\n  event.preventDefault()\n}\n\nconst handleDrop = (event: DragEvent) => {\n  event.preventDefault()\n  isDragging.value = false\n\n  const file = event.dataTransfer?.files[0]\n  if (file) {\n    const error = validateFile(file)\n    if (error) {\n      fileError.value = error\n      selectedFile.value = null\n    } else {\n      fileError.value = ''\n      selectedFile.value = file\n      emit('file-selected', file)\n    }\n  }\n}\n\n// 格式化文件大小\nconst formatFileSize = (bytes: number): string => {\n  if (bytes < 1024) return bytes + ' B'\n  if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB'\n  return (bytes / (1024 * 1024)).toFixed(1) + ' MB'\n}\n\n// 预览克隆\nconst handlePreview = () => {\n  if (canPreview.value) {\n    emit('preview-clone', { text: verificationText.value })\n  }\n}\n</script>\n\n<template>\n  <div class=\"w-[560px] bg-white rounded-[10px] overflow-hidden\">\n    <!-- Header -->\n    <div class=\"h-[49px] px-[30px] flex items-center border-b border-[#00000008]\">\n      <button\n        class=\"flex items-center gap-1.5 text-[#202123] hover:text-[#695fee] transition-colors cursor-pointer\"\n        @click=\"emit('back')\"\n      >\n        <UIcon name=\"i-lucide-arrow-left\" class=\"w-4 h-4\" />\n        <span class=\"text-[13px] font-medium font-['Reddit_Sans']\">Back</span>\n      </button>\n      <h1 class=\"text-[15px] font-semibold text-[#202123] font-['Reddit_Sans'] ml-4\">Dubbing Studio</h1>\n      <button\n        class=\"ml-auto text-[#979797] hover:text-[#202123] transition-colors cursor-pointer\"\n        @click=\"emit('close')\"\n      >\n        <UIcon name=\"i-lucide-x\" class=\"w-5 h-5\" />\n      </button>\n    </div>\n\n    <!-- Content -->\n    <div class=\"px-[30px] py-5\">\n      <!-- Available Clones Card -->\n      <div\n        class=\"w-[500px] h-[70px] rounded-xl flex items-center px-5\"\n        :class=\"hasClones\n          ? 'bg-[#f7f9fe]'\n          : 'bg-[#fff8f8] border border-[#ffcdd2]'\"\n      >\n        <div\n          class=\"w-10 h-10 rounded-[10px] flex items-center justify-center\"\n          :class=\"hasClones ? 'bg-[#eef0ff]' : 'bg-[#ffebee]'\"\n        >\n          <UIcon\n            name=\"i-lucide-sparkles\"\n            class=\"w-5 h-5\"\n            :class=\"hasClones ? 'text-[#695fee]' : 'text-[#e53935]'\"\n          />\n        </div>\n        <div class=\"ml-3 flex-1\">\n          <p class=\"text-sm font-semibold text-[#202123] font-['Reddit_Sans']\">Available Clones</p>\n          <p class=\"text-[13px] font-['Reddit_Sans'] mt-0.5\">\n            <span class=\"text-[#979797]\">Remaining: </span>\n            <span :class=\"hasClones ? 'text-[#202123] font-semibold' : 'text-[#e53935] font-semibold'\">{{ availableClones }}</span>\n            <span class=\"text-[#979797]\"> / {{ totalClones }}</span>\n          </p>\n        </div>\n        <button\n          class=\"h-9 px-5 rounded-[18px] flex items-center gap-1.5 text-white text-xs font-semibold font-['Reddit_Sans'] cursor-pointer hover:opacity-90 active:scale-[0.98] transition-all\"\n          :class=\"hasClones ? 'bg-[#695fee]' : 'bg-[#e53935]'\"\n          @click=\"emit('get-more')\"\n        >\n          <UIcon name=\"i-lucide-plus\" class=\"w-3.5 h-3.5\" />\n          Get More\n        </button>\n      </div>\n\n      <!-- Upload Reference Audio -->\n      <h2 class=\"text-sm font-semibold text-[#202123] font-['Reddit_Sans'] mt-5 mb-3\">\n        Upload Reference Audio\n      </h2>\n\n      <!-- Hidden File Input -->\n      <input\n        ref=\"fileInputRef\"\n        type=\"file\"\n        accept=\".mp3,.wav,.m4a,audio/mpeg,audio/wav,audio/m4a\"\n        class=\"hidden\"\n        @change=\"handleFileSelect\"\n      />\n\n      <div\n        class=\"w-[500px] h-[140px] rounded-xl border bg-white flex relative transition-all\"\n        :class=\"isDragging ? 'border-[#695fee] border-2 bg-[#f7f9fe]' : 'border-[#d0d0d0]'\"\n        @dragenter=\"handleDragEnter\"\n        @dragleave=\"handleDragLeave\"\n        @dragover=\"handleDragOver\"\n        @drop=\"handleDrop\"\n      >\n        <!-- Upload File -->\n        <button\n          class=\"flex-1 flex flex-col items-center justify-center gap-3 hover:bg-[#f7f9fe] transition-colors cursor-pointer rounded-l-xl\"\n          @click=\"triggerFileSelect\"\n        >\n          <div class=\"w-12 h-12 rounded-full bg-[#eef0ff] flex items-center justify-center\">\n            <UIcon name=\"i-lucide-upload\" class=\"w-[22px] h-[22px] text-[#695fee]\" />\n          </div>\n          <div class=\"text-center\">\n            <p class=\"text-sm font-semibold text-[#695fee] font-['Reddit_Sans']\">Upload File</p>\n            <p class=\"text-xs text-[#979797] font-['Reddit_Sans'] mt-1\">MP3, WAV, M4A (Max 50MB)</p>\n          </div>\n        </button>\n\n        <!-- Divider -->\n        <div class=\"w-px h-[100px] bg-[#d0d0d0] self-center\" />\n\n        <!-- Record Voice -->\n        <button\n          class=\"flex-1 flex flex-col items-center justify-center gap-3 hover:bg-[#fff0f5] transition-colors cursor-pointer rounded-r-xl\"\n          @click=\"emit('record-voice')\"\n        >\n          <div class=\"w-12 h-12 rounded-full bg-[#fff0f5] flex items-center justify-center\">\n            <UIcon name=\"i-lucide-mic\" class=\"w-[22px] h-[22px] text-[#e85a8f]\" />\n          </div>\n          <div class=\"text-center\">\n            <p class=\"text-sm font-semibold text-[#e85a8f] font-['Reddit_Sans']\">Record Voice</p>\n            <p class=\"text-xs text-[#979797] font-['Reddit_Sans'] mt-1\">Use Microphone</p>\n          </div>\n        </button>\n\n        <!-- Drag Overlay -->\n        <div\n          v-if=\"isDragging\"\n          class=\"absolute inset-0 bg-[#695fee]/10 rounded-xl flex items-center justify-center pointer-events-none\"\n        >\n          <div class=\"text-[#695fee] font-semibold font-['Reddit_Sans']\">Drop audio file here</div>\n        </div>\n      </div>\n\n      <!-- File Error -->\n      <p v-if=\"fileError\" class=\"text-xs text-[#e53935] mt-2 font-['Reddit_Sans']\">\n        {{ fileError }}\n      </p>\n\n      <!-- Input Verification Text -->\n      <h2 class=\"text-sm font-semibold text-[#202123] font-['Reddit_Sans'] mt-5 mb-3\">\n        Input Verification Text (To verify clone effect)\n      </h2>\n\n      <div class=\"relative\">\n        <textarea\n          v-model=\"verificationText\"\n          :maxlength=\"maxChars\"\n          placeholder=\"Enter short text to verify clone...\"\n          class=\"w-[500px] h-[100px] rounded-lg border border-[#e5e5e5] bg-[#f7f9fe] px-4 py-4 text-[13px] text-[#202123] font-['Reddit_Sans'] placeholder:text-[#b0b0b0] resize-none focus:outline-none focus:border-[#695fee]\"\n        />\n        <span class=\"absolute bottom-[-24px] right-0 text-xs text-[#979797] font-['Reddit_Sans']\">\n          {{ verificationText.length }}/{{ maxChars }} chars\n        </span>\n      </div>\n\n      <!-- Preview Clone Button -->\n      <button\n        class=\"w-[500px] h-11 rounded-[22px] text-white text-sm font-semibold font-['Reddit_Sans'] flex items-center justify-center mt-10 transition-all\"\n        :class=\"canPreview\n          ? 'bg-[#695fee] hover:bg-[#5a4fdf] cursor-pointer active:scale-[0.98]'\n          : 'bg-[#c5c5c5] cursor-not-allowed'\"\n        :disabled=\"!canPreview\"\n        @click=\"handlePreview\"\n      >\n        Preview Clone\n      </button>\n    </div>\n  </div>\n</template>\n",
  "DubbingStudioContainer.vue": "<script setup lang=\"ts\">\ninterface Props {\n  availableClones?: number\n  totalClones?: number\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  availableClones: 2,\n  totalClones: 3\n})\n\n// 状态管理\ntype ViewState = 'default' | 'recording' | 'uploaded' | 'preview'\nconst currentView = ref<ViewState>('default')\n\n// 录音/上传的音频数据\nconst audioData = ref<{\n  blob: Blob | null\n  file: File | null\n  fileName: string\n  fileSize: string\n  duration: number\n  url: string\n}>({\n  blob: null,\n  file: null,\n  fileName: '',\n  fileSize: '',\n  duration: 0,\n  url: ''\n})\n\n// 处理\"Record Voice\"点击\nconst handleRecordVoice = () => {\n  currentView.value = 'recording'\n}\n\n// 处理\"Back\"点击\nconst handleBack = () => {\n  // 清理音频URL\n  if (audioData.value.url) {\n    URL.revokeObjectURL(audioData.value.url)\n  }\n\n  // 重置数据\n  audioData.value = {\n    blob: null,\n    file: null,\n    fileName: '',\n    fileSize: '',\n    duration: 0,\n    url: ''\n  }\n\n  currentView.value = 'default'\n}\n\n// 处理录音保存 - 当点击Preview Clone时触发\nconst handleSaveRecording = (data: {\n  audioBlob: Blob\n  fileName: string\n  fileSize: string\n  duration: number\n}) => {\n  // 创建URL用于播放\n  const url = URL.createObjectURL(data.audioBlob)\n\n  audioData.value = {\n    blob: data.audioBlob,\n    file: null,\n    fileName: data.fileName,\n    fileSize: data.fileSize,\n    duration: data.duration,\n    url: url\n  }\n\n  // 直接切换到uploaded视图\n  currentView.value = 'uploaded'\n}\n\n// 处理文件上传\nconst handleFileSelected = (file: File) => {\n  const url = URL.createObjectURL(file)\n\n  audioData.value = {\n    blob: null,\n    file: file,\n    fileName: file.name,\n    fileSize: formatFileSize(file.size),\n    duration: 0, // 需要加载音频才能获取时长\n    url: url\n  }\n\n  // 切换到uploaded视图\n  currentView.value = 'uploaded'\n}\n\n// 处理移除文件\nconst handleRemoveFile = () => {\n  if (audioData.value.url) {\n    URL.revokeObjectURL(audioData.value.url)\n  }\n\n  audioData.value = {\n    blob: null,\n    file: null,\n    fileName: '',\n    fileSize: '',\n    duration: 0,\n    url: ''\n  }\n\n  currentView.value = 'default'\n}\n\n// 处理预览克隆\nconst handlePreviewClone = (data: any) => {\n  console.log('Preview clone:', data)\n  currentView.value = 'preview'\n}\n\n// 格式化文件大小\nconst formatFileSize = (bytes: number): string => {\n  if (bytes < 1024) return bytes + ' B'\n  if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB'\n  return (bytes / (1024 * 1024)).toFixed(2) + ' MB'\n}\n\n// 组件卸载时清理\nonUnmounted(() => {\n  if (audioData.value.url) {\n    URL.revokeObjectURL(audioData.value.url)\n  }\n})\n\nconst emit = defineEmits<{\n  (e: 'close'): void\n  (e: 'get-more'): void\n}>()\n</script>\n\n<template>\n  <div>\n    <!-- Default View -->\n    <DubbingStudio\n      v-if=\"currentView === 'default'\"\n      :available-clones=\"availableClones\"\n      :total-clones=\"totalClones\"\n      @close=\"emit('close')\"\n      @get-more=\"emit('get-more')\"\n      @record-voice=\"handleRecordVoice\"\n      @file-selected=\"handleFileSelected\"\n    />\n\n    <!-- Recording View -->\n    <DubbingStudioRecording\n      v-else-if=\"currentView === 'recording'\"\n      :available-clones=\"availableClones\"\n      :total-clones=\"totalClones\"\n      @back=\"handleBack\"\n      @close=\"emit('close')\"\n      @get-more=\"emit('get-more')\"\n      @save-recording=\"handleSaveRecording\"\n      @preview-clone=\"handlePreviewClone\"\n    />\n\n    <!-- Uploaded View -->\n    <DubbingStudioUploaded\n      v-else-if=\"currentView === 'uploaded'\"\n      :available-clones=\"availableClones\"\n      :total-clones=\"totalClones\"\n      :audio-file=\"audioData.file\"\n      :file-name=\"audioData.fileName\"\n      :file-size=\"audioData.fileSize\"\n      :total-duration=\"audioData.duration || 120\"\n      :audio-url=\"audioData.url\"\n      @back=\"handleBack\"\n      @close=\"emit('close')\"\n      @get-more=\"emit('get-more')\"\n      @remove-file=\"handleRemoveFile\"\n      @preview-clone=\"handlePreviewClone\"\n    />\n\n    <!-- Preview View -->\n    <DubbingStudioPreview\n      v-else-if=\"currentView === 'preview'\"\n      :available-clones=\"availableClones\"\n      :total-clones=\"totalClones\"\n      :file-name=\"audioData.fileName\"\n      :file-size=\"audioData.fileSize\"\n      :generated-audio-url=\"audioData.url\"\n      :generated-audio-blob=\"audioData.blob\"\n      @back=\"() => currentView = 'uploaded'\"\n      @close=\"emit('close')\"\n      @get-more=\"emit('get-more')\"\n    />\n  </div>\n</template>\n",
  "DubbingStudioPreview.vue": "<script setup lang=\"ts\">\ninterface Props {\n  availableClones?: number\n  totalClones?: number\n  fileName?: string\n  fileSize?: string\n  duration?: string\n  selectionStart?: string\n  selectionEnd?: string\n  selectedDuration?: string\n  // 生成的语音 URL 或 Blob\n  generatedAudioUrl?: string\n  generatedAudioBlob?: Blob | null\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  availableClones: 2,\n  totalClones: 3,\n  fileName: 'voice_sample.mp3',\n  fileSize: '2.4 MB',\n  duration: '00:32 total',\n  selectionStart: '00:05',\n  selectionEnd: '00:17',\n  selectedDuration: '12s',\n  generatedAudioUrl: '',\n  generatedAudioBlob: null\n})\n\n// 音频播放状态\nconst isPlaying = ref(false)\nconst isLoading = ref(true)\nconst currentTime = ref(0)\nconst totalDuration = ref(12) // 默认12秒\n\n// 音频元素引用\nconst audioRef = ref<HTMLAudioElement | null>(null)\n\n// 格式化时间\nconst formatTime = (seconds: number) => {\n  const mins = Math.floor(seconds / 60)\n  const secs = Math.floor(seconds % 60)\n  return `${mins}:${secs.toString().padStart(2, '0')}`\n}\n\nconst previewCurrentTime = computed(() => formatTime(currentTime.value))\nconst previewTotalTime = computed(() => formatTime(totalDuration.value))\n\n// 播放进度百分比\nconst playProgress = computed(() => {\n  if (totalDuration.value === 0) return 0\n  return (currentTime.value / totalDuration.value) * 100\n})\n\nconst emit = defineEmits<{\n  (e: 'back'): void\n  (e: 'close'): void\n  (e: 'get-more'): void\n  (e: 'remove-file'): void\n  (e: 'regenerate'): void\n  (e: 'save-voice', data: { audioUrl: string; audioBlob: Blob | null }): void\n}>()\n\n// 播放/暂停切换\nconst togglePlayback = () => {\n  if (!audioRef.value) return\n\n  if (isPlaying.value) {\n    audioRef.value.pause()\n  } else {\n    audioRef.value.play()\n  }\n}\n\n// 音频事件处理\nconst handlePlay = () => {\n  isPlaying.value = true\n}\n\nconst handlePause = () => {\n  isPlaying.value = false\n}\n\nconst handleEnded = () => {\n  isPlaying.value = false\n  currentTime.value = 0\n}\n\nconst handleTimeUpdate = () => {\n  if (audioRef.value) {\n    currentTime.value = audioRef.value.currentTime\n  }\n}\n\nconst handleLoadedMetadata = () => {\n  if (audioRef.value) {\n    totalDuration.value = audioRef.value.duration\n  }\n  isLoading.value = false\n}\n\nconst handleLoadStart = () => {\n  isLoading.value = true\n}\n\n// 进度条点击跳转\nconst handleProgressClick = (event: MouseEvent) => {\n  if (!audioRef.value) return\n\n  const target = event.currentTarget as HTMLElement\n  const rect = target.getBoundingClientRect()\n  const clickPercent = (event.clientX - rect.left) / rect.width\n  const newTime = clickPercent * totalDuration.value\n\n  audioRef.value.currentTime = newTime\n  currentTime.value = newTime\n}\n\n// 重新生成\nconst handleRegenerate = () => {\n  isLoading.value = true\n  currentTime.value = 0\n  isPlaying.value = false\n  emit('regenerate')\n}\n\n// 保存语音\nconst handleSave = () => {\n  emit('save-voice', {\n    audioUrl: props.generatedAudioUrl,\n    audioBlob: props.generatedAudioBlob\n  })\n}\n\n// 组件挂载时，如果有音频 URL 则准备播放\nonMounted(() => {\n  if (props.generatedAudioUrl || props.generatedAudioBlob) {\n    // 音频准备就绪\n    isLoading.value = false\n  } else {\n    // 模拟音频生成过程（2秒）\n    setTimeout(() => {\n      isLoading.value = false\n    }, 2000)\n  }\n})\n\n// 组件卸载时停止播放\nonUnmounted(() => {\n  if (audioRef.value) {\n    audioRef.value.pause()\n  }\n})\n</script>\n\n<template>\n  <div class=\"w-[560px] bg-white rounded-[10px] overflow-hidden\">\n    <!-- Header -->\n    <div class=\"h-[49px] px-[30px] flex items-center border-b border-[#00000008]\">\n      <button\n        class=\"flex items-center gap-1.5 text-[#202123] hover:text-[#695fee] transition-colors cursor-pointer\"\n        @click=\"emit('back')\"\n      >\n        <UIcon name=\"i-lucide-arrow-left\" class=\"w-4 h-4\" />\n        <span class=\"text-[13px] font-medium font-['Reddit_Sans']\">Back</span>\n      </button>\n      <h1 class=\"text-[15px] font-semibold text-[#202123] font-['Reddit_Sans'] ml-4\">Dubbing Studio</h1>\n      <button\n        class=\"ml-auto text-[#979797] hover:text-[#202123] transition-colors cursor-pointer\"\n        @click=\"emit('close')\"\n      >\n        <UIcon name=\"i-lucide-x\" class=\"w-5 h-5\" />\n      </button>\n    </div>\n\n    <!-- Content -->\n    <div class=\"px-[30px] py-5\">\n      <!-- Available Clones Card -->\n      <div class=\"w-[500px] h-[70px] rounded-xl bg-[#f7f9fe] flex items-center px-5\">\n        <div class=\"w-10 h-10 rounded-[10px] bg-[#eef0ff] flex items-center justify-center\">\n          <UIcon name=\"i-lucide-sparkles\" class=\"w-5 h-5 text-[#695fee]\" />\n        </div>\n        <div class=\"ml-3 flex-1\">\n          <p class=\"text-sm font-semibold text-[#202123] font-['Reddit_Sans']\">Available Clones</p>\n          <p class=\"text-[13px] font-['Reddit_Sans'] mt-0.5\">\n            <span class=\"text-[#979797]\">Remaining: </span>\n            <span class=\"text-[#202123] font-semibold\">{{ availableClones }}</span>\n            <span class=\"text-[#979797]\"> / {{ totalClones }}</span>\n          </p>\n        </div>\n        <button\n          class=\"h-9 px-5 rounded-[18px] bg-[#695fee] flex items-center gap-1.5 text-white text-xs font-semibold font-['Reddit_Sans'] cursor-pointer hover:opacity-90 active:scale-[0.98] transition-all\"\n          @click=\"emit('get-more')\"\n        >\n          <UIcon name=\"i-lucide-plus\" class=\"w-3.5 h-3.5\" />\n          Get More\n        </button>\n      </div>\n\n      <!-- Upload Reference Audio -->\n      <h2 class=\"text-sm font-semibold text-[#202123] font-['Reddit_Sans'] mt-5 mb-3\">\n        Upload Reference Audio\n      </h2>\n\n      <!-- Uploaded File Card -->\n      <div class=\"w-[500px] rounded-xl border border-[#4caf50] bg-[#f1f8e9] p-3.5\">\n        <!-- File Info Row -->\n        <div class=\"flex items-center\">\n          <div class=\"w-11 h-11 rounded-[10px] bg-[#e8f5e9] flex items-center justify-center\">\n            <UIcon name=\"i-lucide-music\" class=\"w-[22px] h-[22px] text-[#4caf50]\" />\n          </div>\n          <div class=\"ml-3 flex-1\">\n            <p class=\"text-sm font-semibold text-[#202123] font-['Reddit_Sans']\">{{ fileName }}</p>\n            <p class=\"text-xs text-[#979797] font-['Reddit_Sans'] mt-0.5\">{{ fileSize }} • {{ duration }}</p>\n          </div>\n          <div class=\"w-6 h-6 rounded-full bg-[#4caf50] flex items-center justify-center\">\n            <UIcon name=\"i-lucide-check\" class=\"w-3.5 h-3.5 text-white\" />\n          </div>\n          <button\n            class=\"ml-3 text-[#979797] hover:text-[#e53935] transition-colors cursor-pointer\"\n            @click=\"emit('remove-file')\"\n          >\n            <UIcon name=\"i-lucide-x\" class=\"w-[18px] h-[18px]\" />\n          </button>\n        </div>\n      </div>\n\n      <!-- Preview Generated Voice -->\n      <h2 class=\"text-sm font-semibold text-[#202123] font-['Reddit_Sans'] mt-5 mb-3\">\n        Preview Generated Voice\n      </h2>\n\n      <!-- Hidden Audio Element -->\n      <audio\n        ref=\"audioRef\"\n        :src=\"generatedAudioUrl\"\n        class=\"hidden\"\n        @play=\"handlePlay\"\n        @pause=\"handlePause\"\n        @ended=\"handleEnded\"\n        @timeupdate=\"handleTimeUpdate\"\n        @loadedmetadata=\"handleLoadedMetadata\"\n        @loadstart=\"handleLoadStart\"\n      />\n\n      <!-- Preview Card -->\n      <div class=\"w-[500px] rounded-xl border border-[#e5e5e5] bg-white p-3\">\n        <div class=\"flex items-center gap-3\">\n          <!-- Play Button -->\n          <button\n            class=\"w-8 h-8 rounded-full bg-[#695fee] flex items-center justify-center cursor-pointer hover:bg-[#5a4fdf] active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n            :disabled=\"isLoading\"\n            @click=\"togglePlayback\"\n          >\n            <UIcon v-if=\"isLoading\" name=\"i-lucide-loader-2\" class=\"w-4 h-4 text-white animate-spin\" />\n            <UIcon\n              v-else\n              :name=\"isPlaying ? 'i-lucide-pause' : 'i-lucide-play'\"\n              class=\"w-4 h-4 text-white\"\n              :class=\"isPlaying ? '' : 'ml-0.5'\"\n            />\n          </button>\n\n          <!-- Time -->\n          <span class=\"text-[13px] font-medium text-[#695fee] font-['Reddit_Sans'] min-w-[70px]\">\n            {{ previewCurrentTime }} / {{ previewTotalTime }}\n          </span>\n\n          <!-- Spacer -->\n          <div class=\"flex-1\" />\n\n          <!-- Regenerate Button -->\n          <button\n            class=\"h-8 px-4 rounded-lg border border-[#695fee] bg-white flex items-center gap-1.5 text-[#695fee] text-xs font-medium font-['Reddit_Sans'] cursor-pointer hover:bg-[#f7f9fe] active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n            :disabled=\"isLoading\"\n            @click=\"handleRegenerate\"\n          >\n            <UIcon name=\"i-lucide-refresh-cw\" class=\"w-3.5 h-3.5\" :class=\"{ 'animate-spin': isLoading }\" />\n            Regenerate\n          </button>\n        </div>\n\n        <!-- Progress Bar -->\n        <div\n          class=\"mt-3 h-1.5 bg-[#e5e5e5] rounded-full cursor-pointer overflow-hidden\"\n          @click=\"handleProgressClick\"\n        >\n          <div\n            class=\"h-full bg-[#695fee] rounded-full transition-all duration-100\"\n            :style=\"{ width: playProgress + '%' }\"\n          />\n        </div>\n      </div>\n\n      <!-- Save Voice Button -->\n      <button\n        class=\"w-[500px] h-11 rounded-[22px] bg-[#695fee] hover:bg-[#5a4fdf] text-white text-sm font-semibold font-['Reddit_Sans'] flex items-center justify-center mt-6 cursor-pointer active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n        :disabled=\"isLoading\"\n        @click=\"handleSave\"\n      >\n        Save Voice\n      </button>\n    </div>\n  </div>\n</template>\n",
  "DubbingStudioRecording.vue": "<script setup lang=\"ts\">\ninterface Props {\n  availableClones?: number\n  totalClones?: number\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  availableClones: 2,\n  totalClones: 3\n})\n\n// 录音状态\nconst isRecording = ref(false)\nconst recordingTime = ref(0)\nconst minDuration = 10 // 最小录音时长（秒）\nconst maxDuration = 120 // 最大录音时长（秒）\n\n// 录音相关\nlet recordingTimer: ReturnType<typeof setInterval> | null = null\nlet mediaRecorder: MediaRecorder | null = null\nlet audioChunks: Blob[] = []\nconst audioStream = ref<MediaStream | null>(null)\nconst recordedAudioUrl = ref<string | null>(null)\nconst recordedAudioBlob = ref<Blob | null>(null)\n\n// 音频分析（用于波形动画）\nlet audioContext: AudioContext | null = null\nlet analyser: AnalyserNode | null = null\nconst audioLevels = ref<number[]>(Array(16).fill(20))\n\n// 验证文本\nconst verificationText = ref('')\nconst maxChars = 200\n\n// 计算属性\nconst minDurationReached = computed(() => recordingTime.value >= minDuration)\nconst canPreview = computed(() => minDurationReached.value && verificationText.value.length > 0 && recordedAudioBlob.value !== null)\n\nconst formattedTime = computed(() => {\n  const minutes = Math.floor(recordingTime.value / 60)\n  const seconds = recordingTime.value % 60\n  return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`\n})\n\nconst emit = defineEmits<{\n  (e: 'back'): void\n  (e: 'close'): void\n  (e: 'get-more'): void\n  (e: 'preview-clone', data: { audio: Blob; text: string; duration: number }): void\n  (e: 'save-recording', data: { audioBlob: Blob; fileName: string; fileSize: string; duration: number }): void\n}>()\n\n// 开始录音\nconst startRecording = async () => {\n  try {\n    // 获取麦克风权限\n    const stream = await navigator.mediaDevices.getUserMedia({ audio: true })\n    audioStream.value = stream\n\n    // 创建音频分析器（用于波形动画）\n    audioContext = new AudioContext()\n    analyser = audioContext.createAnalyser()\n    const source = audioContext.createMediaStreamSource(stream)\n    source.connect(analyser)\n    analyser.fftSize = 32\n\n    // 创建录音器\n    mediaRecorder = new MediaRecorder(stream)\n    audioChunks = []\n\n    mediaRecorder.ondataavailable = (event) => {\n      if (event.data.size > 0) {\n        audioChunks.push(event.data)\n      }\n    }\n\n    mediaRecorder.onstop = () => {\n      const audioBlob = new Blob(audioChunks, { type: 'audio/webm' })\n      recordedAudioBlob.value = audioBlob\n      recordedAudioUrl.value = URL.createObjectURL(audioBlob)\n    }\n\n    mediaRecorder.start(100) // 每100ms收集一次数据\n    isRecording.value = true\n    recordingTime.value = 0\n\n    // 开始计时\n    recordingTimer = setInterval(() => {\n      recordingTime.value++\n      updateAudioLevels()\n\n      // 达到最大时长自动停止\n      if (recordingTime.value >= maxDuration) {\n        stopRecording()\n      }\n    }, 1000)\n\n    // 启动波形动画\n    animateWaveform()\n  } catch (error) {\n    console.error('无法访问麦克风:', error)\n    alert('无法访问麦克风，请确保已授予麦克风权限')\n  }\n}\n\n// 更新音频电平（用于波形动画）\nconst updateAudioLevels = () => {\n  if (!analyser) return\n\n  const dataArray = new Uint8Array(analyser.frequencyBinCount)\n  analyser.getByteFrequencyData(dataArray)\n\n  // 将频率数据映射到波形高度\n  const levels: number[] = []\n  for (let i = 0; i < 16; i++) {\n    const index = Math.floor((i / 16) * dataArray.length)\n    const value = dataArray[index]\n    levels.push(Math.max(10, (value / 255) * 40 + 10))\n  }\n  audioLevels.value = levels\n}\n\n// 波形动画循环\nlet animationFrameId: number | null = null\nconst animateWaveform = () => {\n  if (!isRecording.value) return\n\n  updateAudioLevels()\n  animationFrameId = requestAnimationFrame(animateWaveform)\n}\n\n// 停止录音\nconst stopRecording = () => {\n  if (mediaRecorder && mediaRecorder.state !== 'inactive') {\n    mediaRecorder.stop()\n  }\n\n  // 停止所有音轨\n  if (audioStream.value) {\n    audioStream.value.getTracks().forEach(track => track.stop())\n    audioStream.value = null\n  }\n\n  // 清理音频分析器\n  if (audioContext) {\n    audioContext.close()\n    audioContext = null\n    analyser = null\n  }\n\n  // 停止计时器\n  if (recordingTimer) {\n    clearInterval(recordingTimer)\n    recordingTimer = null\n  }\n\n  // 停止动画\n  if (animationFrameId) {\n    cancelAnimationFrame(animationFrameId)\n    animationFrameId = null\n  }\n\n  isRecording.value = false\n  audioLevels.value = Array(16).fill(20)\n}\n\n// 切换录音状态\nconst toggleRecording = () => {\n  if (isRecording.value) {\n    stopRecording()\n  } else {\n    // 如果之前有录音，清除它\n    if (recordedAudioUrl.value) {\n      URL.revokeObjectURL(recordedAudioUrl.value)\n      recordedAudioUrl.value = null\n      recordedAudioBlob.value = null\n    }\n    startRecording()\n  }\n}\n\n// 预览克隆 - 同时保存录音并切换到uploaded状态\nconst handlePreview = () => {\n  if (canPreview.value && recordedAudioBlob.value) {\n    // 计算文件大小\n    const sizeInMB = (recordedAudioBlob.value.size / (1024 * 1024)).toFixed(2)\n    const fileName = `recording-${new Date().getTime()}.webm`\n\n    // 发送保存录音事件，传递录音数据\n    emit('save-recording', {\n      audioBlob: recordedAudioBlob.value,\n      fileName: fileName,\n      fileSize: `${sizeInMB} MB`,\n      duration: recordingTime.value\n    })\n  }\n}\n\n// 组件卸载时清理\nonUnmounted(() => {\n  stopRecording()\n  if (recordedAudioUrl.value) {\n    URL.revokeObjectURL(recordedAudioUrl.value)\n  }\n})\n</script>\n\n<template>\n  <div class=\"w-[560px] bg-white rounded-[10px] overflow-hidden\">\n    <!-- Header -->\n    <div class=\"h-[49px] px-[30px] flex items-center border-b border-[#00000008]\">\n      <button\n        class=\"flex items-center gap-1.5 text-[#202123] hover:text-[#695fee] transition-colors cursor-pointer\"\n        @click=\"emit('back')\"\n      >\n        <UIcon name=\"i-lucide-arrow-left\" class=\"w-4 h-4\" />\n        <span class=\"text-[13px] font-medium font-['Reddit_Sans']\">Back</span>\n      </button>\n      <h1 class=\"text-[15px] font-semibold text-[#202123] font-['Reddit_Sans'] ml-4\">Dubbing Studio</h1>\n      <button\n        class=\"ml-auto text-[#979797] hover:text-[#202123] transition-colors cursor-pointer\"\n        @click=\"emit('close')\"\n      >\n        <UIcon name=\"i-lucide-x\" class=\"w-5 h-5\" />\n      </button>\n    </div>\n\n    <!-- Content -->\n    <div class=\"px-[30px] py-5\">\n      <!-- Available Clones Card -->\n      <div class=\"w-[500px] h-[70px] rounded-xl bg-[#f7f9fe] flex items-center px-5\">\n        <div class=\"w-10 h-10 rounded-[10px] bg-[#eef0ff] flex items-center justify-center\">\n          <UIcon name=\"i-lucide-sparkles\" class=\"w-5 h-5 text-[#695fee]\" />\n        </div>\n        <div class=\"ml-3 flex-1\">\n          <p class=\"text-sm font-semibold text-[#202123] font-['Reddit_Sans']\">Available Clones</p>\n          <p class=\"text-[13px] font-['Reddit_Sans'] mt-0.5\">\n            <span class=\"text-[#979797]\">Remaining: </span>\n            <span class=\"text-[#202123] font-semibold\">{{ availableClones }}</span>\n            <span class=\"text-[#979797]\"> / {{ totalClones }}</span>\n          </p>\n        </div>\n        <button\n          class=\"h-9 px-5 rounded-[18px] bg-[#695fee] flex items-center gap-1.5 text-white text-xs font-semibold font-['Reddit_Sans'] cursor-pointer hover:opacity-90 active:scale-[0.98] transition-all\"\n          @click=\"emit('get-more')\"\n        >\n          <UIcon name=\"i-lucide-plus\" class=\"w-3.5 h-3.5\" />\n          Get More\n        </button>\n      </div>\n\n      <!-- Upload Reference Audio -->\n      <h2 class=\"text-sm font-semibold text-[#202123] font-['Reddit_Sans'] mt-5 mb-3\">\n        Upload Reference Audio\n      </h2>\n\n      <!-- Recording Area -->\n      <div class=\"w-[500px] h-[200px] rounded-xl border border-[#e5e5e5] bg-white flex flex-col items-center justify-center relative\">\n        <!-- Waveform Animation (when recording) -->\n        <div v-if=\"isRecording\" class=\"absolute left-[120px] top-[44px] flex items-center gap-[7px]\">\n          <div\n            v-for=\"(height, i) in audioLevels.slice(0, 8)\"\n            :key=\"'left-' + i\"\n            class=\"w-[3px] rounded-sm bg-[#e85a8f] transition-all duration-100\"\n            :style=\"{ height: height + 'px' }\"\n          />\n        </div>\n        <div v-if=\"isRecording\" class=\"absolute right-[120px] top-[44px] flex items-center gap-[7px]\">\n          <div\n            v-for=\"(height, i) in audioLevels.slice(8, 16)\"\n            :key=\"'right-' + i\"\n            class=\"w-[3px] rounded-sm bg-[#e85a8f] transition-all duration-100\"\n            :style=\"{ height: height + 'px' }\"\n          />\n        </div>\n\n        <!-- Record Button -->\n        <button\n          class=\"w-20 h-20 rounded-full bg-[#ffe0eb] border-2 border-[#e85a8f] flex items-center justify-center cursor-pointer hover:bg-[#ffd0e0] active:scale-95 transition-all\"\n          @click=\"toggleRecording\"\n        >\n          <div class=\"w-14 h-14 rounded-full bg-[#e85a8f] flex items-center justify-center\">\n            <UIcon\n              :name=\"isRecording ? 'i-lucide-square' : 'i-lucide-mic'\"\n              class=\"text-white\"\n              :class=\"isRecording ? 'w-5 h-5' : 'w-7 h-7'\"\n            />\n          </div>\n        </button>\n\n        <!-- Recording Time -->\n        <p class=\"text-2xl font-semibold text-[#e85a8f] font-['Reddit_Sans'] mt-3\">\n          {{ formattedTime }}\n        </p>\n\n        <!-- Status Text -->\n        <p class=\"text-[13px] font-['Reddit_Sans'] mt-2\" :class=\"isRecording ? 'text-[#e85a8f]' : 'text-[#979797]'\">\n          {{ isRecording ? 'Recording... Tap to stop' : 'Tap to start recording' }}\n        </p>\n\n        <!-- Min Duration -->\n        <p\n          class=\"text-[11px] font-['Reddit_Sans'] mt-2\"\n          :class=\"minDurationReached ? 'text-[#4caf50]' : 'text-[#b0b0b0]'\"\n        >\n          {{ minDurationReached ? '✓ Minimum duration reached' : 'Minimum 10 seconds required' }}\n        </p>\n      </div>\n\n      <!-- Input Verification Text -->\n      <h2 class=\"text-sm font-semibold text-[#202123] font-['Reddit_Sans'] mt-5 mb-3\">\n        Input Verification Text (To verify clone effect)\n      </h2>\n\n      <div class=\"relative\">\n        <textarea\n          v-model=\"verificationText\"\n          :maxlength=\"maxChars\"\n          placeholder=\"Enter short text to verify clone...\"\n          class=\"w-[500px] h-[100px] rounded-lg border border-[#e5e5e5] bg-[#f7f9fe] px-4 py-4 text-[13px] text-[#202123] font-['Reddit_Sans'] placeholder:text-[#b0b0b0] resize-none focus:outline-none focus:border-[#695fee]\"\n        />\n        <span class=\"absolute bottom-[-24px] right-0 text-xs text-[#979797] font-['Reddit_Sans']\">\n          {{ verificationText.length }}/{{ maxChars }} chars\n        </span>\n      </div>\n\n      <!-- Preview Clone Button -->\n      <button\n        class=\"w-[500px] h-11 rounded-[22px] text-white text-sm font-semibold font-['Reddit_Sans'] flex items-center justify-center mt-10 transition-all\"\n        :class=\"canPreview\n          ? 'bg-[#695fee] hover:bg-[#5a4fdf] cursor-pointer active:scale-[0.98]'\n          : 'bg-[#c5c5c5] cursor-not-allowed'\"\n        :disabled=\"!canPreview\"\n        @click=\"handlePreview\"\n      >\n        Preview Clone\n      </button>\n\n      <!-- Recorded Audio Playback (hidden, for debugging) -->\n      <audio v-if=\"recordedAudioUrl\" :src=\"recordedAudioUrl\" controls class=\"hidden\" />\n    </div>\n  </div>\n</template>\n",
  "DubbingStudioSaveDialog.vue": "<script setup lang=\"ts\">\ninterface Props {\n  defaultName?: string\n  audioUrl?: string\n  audioBlob?: Blob | null\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  defaultName: 'My Voice Clone',\n  audioUrl: '',\n  audioBlob: null\n})\n\nconst voiceName = ref(props.defaultName)\nconst isSaving = ref(false)\nconst saveError = ref('')\n\n// 验证名称\nconst isValidName = computed(() => {\n  const name = voiceName.value.trim()\n  return name.length >= 2 && name.length <= 50\n})\n\nconst nameError = computed(() => {\n  const name = voiceName.value.trim()\n  if (name.length === 0) return ''\n  if (name.length < 2) return 'Name must be at least 2 characters'\n  if (name.length > 50) return 'Name must be less than 50 characters'\n  return ''\n})\n\nconst emit = defineEmits<{\n  (e: 'back'): void\n  (e: 'close'): void\n  (e: 'save', data: { name: string; audioUrl: string; audioBlob: Blob | null }): void\n  (e: 'cancel'): void\n}>()\n\nconst handleSave = async () => {\n  if (!isValidName.value) return\n\n  isSaving.value = true\n  saveError.value = ''\n\n  try {\n    // 模拟保存延迟（实际项目中这里会是 API 调用）\n    await new Promise(resolve => setTimeout(resolve, 500))\n\n    emit('save', {\n      name: voiceName.value.trim(),\n      audioUrl: props.audioUrl,\n      audioBlob: props.audioBlob\n    })\n  } catch (error) {\n    saveError.value = 'Failed to save voice clone. Please try again.'\n    console.error('Save error:', error)\n  } finally {\n    isSaving.value = false\n  }\n}\n\n// 输入框获取焦点时选中全部文本\nconst handleInputFocus = (event: FocusEvent) => {\n  const input = event.target as HTMLInputElement\n  input.select()\n}\n\n// 键盘快捷键：回车保存\nconst handleKeydown = (event: KeyboardEvent) => {\n  if (event.key === 'Enter' && isValidName.value && !isSaving.value) {\n    handleSave()\n  }\n}\n</script>\n\n<template>\n  <div class=\"w-[560px] bg-white rounded-[10px] overflow-hidden\">\n    <!-- Header -->\n    <div class=\"h-[49px] px-[30px] flex items-center border-b border-[#00000008]\">\n      <button\n        class=\"flex items-center gap-1.5 text-[#202123] hover:text-[#695fee] transition-colors cursor-pointer\"\n        @click=\"emit('back')\"\n      >\n        <UIcon name=\"i-lucide-arrow-left\" class=\"w-4 h-4\" />\n        <span class=\"text-[13px] font-medium font-['Reddit_Sans']\">Back</span>\n      </button>\n      <h1 class=\"text-[15px] font-semibold text-[#202123] font-['Reddit_Sans'] ml-4\">Dubbing Studio</h1>\n      <button\n        class=\"ml-auto text-[#979797] hover:text-[#202123] transition-colors cursor-pointer\"\n        @click=\"emit('close')\"\n      >\n        <UIcon name=\"i-lucide-x\" class=\"w-5 h-5\" />\n      </button>\n    </div>\n\n    <!-- Content -->\n    <div class=\"px-[30px] py-10\">\n      <!-- Success Icon -->\n      <div class=\"flex justify-center mb-6\">\n        <div class=\"w-20 h-20 rounded-full bg-[#e8f5e9] flex items-center justify-center\">\n          <UIcon name=\"i-lucide-check\" class=\"w-10 h-10 text-[#4caf50]\" />\n        </div>\n      </div>\n\n      <!-- Success Title -->\n      <h2 class=\"text-xl font-semibold text-[#202123] font-['Reddit_Sans'] text-center\">\n        Voice Clone Created!\n      </h2>\n\n      <!-- Description -->\n      <p class=\"text-sm text-[#979797] font-['Reddit_Sans'] text-center mt-3\">\n        Give your voice clone a name to save it\n      </p>\n\n      <!-- Voice Name Input -->\n      <div class=\"mt-8\">\n        <label class=\"text-sm font-semibold text-[#202123] font-['Reddit_Sans']\">\n          Voice Name\n        </label>\n        <input\n          v-model=\"voiceName\"\n          type=\"text\"\n          maxlength=\"50\"\n          class=\"w-[500px] h-12 mt-2 px-4 rounded-[10px] bg-[#f7f9fe] border text-sm text-[#202123] font-['Reddit_Sans'] focus:outline-none transition-colors\"\n          :class=\"nameError ? 'border-[#e53935] focus:border-[#e53935]' : 'border-[#e5e5e5] focus:border-[#695fee]'\"\n          placeholder=\"Enter voice name\"\n          @focus=\"handleInputFocus\"\n          @keydown=\"handleKeydown\"\n        />\n        <!-- Error Message -->\n        <p v-if=\"nameError\" class=\"text-xs text-[#e53935] mt-1.5 font-['Reddit_Sans']\">\n          {{ nameError }}\n        </p>\n        <!-- Character Count -->\n        <p class=\"text-xs text-[#979797] mt-1.5 font-['Reddit_Sans'] text-right\">\n          {{ voiceName.length }}/50 characters\n        </p>\n      </div>\n\n      <!-- Save Error -->\n      <div v-if=\"saveError\" class=\"mt-4 p-3 bg-[#ffebee] border border-[#ffcdd2] rounded-lg\">\n        <p class=\"text-sm text-[#e53935] font-['Reddit_Sans']\">{{ saveError }}</p>\n      </div>\n\n      <!-- Save Button -->\n      <button\n        class=\"w-[500px] h-12 rounded-3xl bg-[#695fee] hover:bg-[#5a4fdf] text-white text-sm font-semibold font-['Reddit_Sans'] flex items-center justify-center mt-6 cursor-pointer active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n        :disabled=\"!isValidName || isSaving\"\n        @click=\"handleSave\"\n      >\n        <UIcon v-if=\"isSaving\" name=\"i-lucide-loader-2\" class=\"w-4 h-4 mr-2 animate-spin\" />\n        {{ isSaving ? 'Saving...' : 'Save Voice Clone' }}\n      </button>\n\n      <!-- Cancel Button -->\n      <button\n        class=\"w-[500px] h-12 rounded-3xl bg-white border border-[#e5e5e5] text-[#979797] text-sm font-semibold font-['Reddit_Sans'] flex items-center justify-center mt-3 cursor-pointer hover:bg-gray-50 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n        :disabled=\"isSaving\"\n        @click=\"emit('cancel')\"\n      >\n        Cancel\n      </button>\n    </div>\n  </div>\n</template>\n",
  "DubbingStudioUploaded.vue": "<script setup lang=\"ts\">\ninterface Props {\n  availableClones?: number\n  totalClones?: number\n  // 可以传入文件对象或文件信息\n  audioFile?: File | null\n  fileName?: string\n  fileSize?: string\n  totalDuration?: number // 总时长（秒）\n  audioUrl?: string // 音频 URL\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  availableClones: 2,\n  totalClones: 3,\n  audioFile: null,\n  fileName: 'voice_sample.mp3',\n  fileSize: '2.4 MB',\n  totalDuration: 120, // 默认2分钟长音频\n  audioUrl: ''\n})\n\n// 音频播放相关\nconst audioRef = ref<HTMLAudioElement | null>(null)\nconst isPlaying = ref(false)\nconst playbackTime = ref(0)\nconst actualDuration = ref(props.totalDuration)\n\n// 内部音频 URL（如果传入了文件则创建 URL）\nconst internalAudioUrl = ref<string | null>(null)\n\n// 计算实际使用的音频 URL\nconst effectiveAudioUrl = computed(() => {\n  return props.audioUrl || internalAudioUrl.value || ''\n})\n\n// 监听音频文件变化\nwatch(() => props.audioFile, (newFile) => {\n  if (newFile) {\n    // 清理旧的 URL\n    if (internalAudioUrl.value) {\n      URL.revokeObjectURL(internalAudioUrl.value)\n    }\n    // 创建新的 URL\n    internalAudioUrl.value = URL.createObjectURL(newFile)\n  }\n}, { immediate: true })\n\n// 组件卸载时清理 URL\nonUnmounted(() => {\n  if (internalAudioUrl.value) {\n    URL.revokeObjectURL(internalAudioUrl.value)\n  }\n  if (audioRef.value) {\n    audioRef.value.pause()\n  }\n})\n\n// 视口状态（显示音频的哪个部分，百分比 0-100）\nconst viewStart = ref(0)\nconst viewEnd = ref(40) // 默认显示40%的音频\nconst zoomLevel = computed(() => 100 / (viewEnd.value - viewStart.value))\n\n// 选择区域状态（相对于整个音频的百分比 0-100）\nconst selectionStart = ref(10)\nconst selectionEnd = ref(30)\n\n// 拖动状态\nconst isDragging = ref<'start' | 'end' | 'range' | 'pan' | null>(null)\nconst dragStartX = ref(0)\nconst dragStartSelectionStart = ref(0)\nconst dragStartSelectionEnd = ref(0)\nconst dragStartViewStart = ref(0)\nconst dragStartViewEnd = ref(0)\nconst justFinishedDrag = ref(false)\n\nconst waveformRef = ref<HTMLElement | null>(null)\nconst containerRef = ref<HTMLElement | null>(null)\n\n// 生成固定的波形数据（更多数据点用于长音频）\nconst waveformData = Array.from({ length: 200 }, () => Math.floor(Math.random() * 28 + 6))\n\n// 计算选中时长\nconst selectedDurationSeconds = computed(() => {\n  const duration = ((selectionEnd.value - selectionStart.value) / 100) * props.totalDuration\n  return Math.round(duration)\n})\n\n// 格式化时间\nconst formatTime = (seconds: number) => {\n  const mins = Math.floor(seconds / 60)\n  const secs = Math.floor(seconds % 60)\n  return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`\n}\n\n// 计算时间标签\nconst startTimeLabel = computed(() => {\n  const seconds = (selectionStart.value / 100) * props.totalDuration\n  return formatTime(seconds)\n})\n\nconst endTimeLabel = computed(() => {\n  const seconds = (selectionEnd.value / 100) * props.totalDuration\n  return formatTime(seconds)\n})\n\nconst totalDurationLabel = computed(() => formatTime(props.totalDuration) + ' total')\n\n// 将全局位置转换为视口内位置\nconst globalToViewport = (globalPercent: number) => {\n  return ((globalPercent - viewStart.value) / (viewEnd.value - viewStart.value)) * 100\n}\n\n// 将视口内位置转换为全局位置\nconst viewportToGlobal = (viewportPercent: number) => {\n  return viewStart.value + (viewportPercent / 100) * (viewEnd.value - viewStart.value)\n}\n\n// 判断选择区域是否在视口内可见\nconst isSelectionVisible = computed(() => {\n  return selectionEnd.value > viewStart.value && selectionStart.value < viewEnd.value\n})\n\n// 计算选择区域在视口内的位置\nconst selectionViewportStart = computed(() => {\n  return Math.max(0, globalToViewport(selectionStart.value))\n})\n\nconst selectionViewportEnd = computed(() => {\n  return Math.min(100, globalToViewport(selectionEnd.value))\n})\n\n// 判断波形条是否在选择区域内\nconst isBarSelected = (index: number, totalBars: number) => {\n  const barGlobalPosition = viewStart.value + (index / totalBars) * (viewEnd.value - viewStart.value)\n  return barGlobalPosition >= selectionStart.value && barGlobalPosition <= selectionEnd.value\n}\n\n// 计算当前视口显示的波形条数量和数据\nconst visibleWaveformData = computed(() => {\n  const startIndex = Math.floor((viewStart.value / 100) * waveformData.length)\n  const endIndex = Math.ceil((viewEnd.value / 100) * waveformData.length)\n  return waveformData.slice(startIndex, endIndex)\n})\n\n// 拖动处理\nconst startDrag = (type: 'start' | 'end' | 'range' | 'pan', event: MouseEvent) => {\n  event.preventDefault()\n  event.stopPropagation()\n  isDragging.value = type\n  dragStartX.value = event.clientX\n  dragStartSelectionStart.value = selectionStart.value\n  dragStartSelectionEnd.value = selectionEnd.value\n  dragStartViewStart.value = viewStart.value\n  dragStartViewEnd.value = viewEnd.value\n\n  document.addEventListener('mousemove', handleDrag)\n  document.addEventListener('mouseup', stopDrag)\n}\n\nconst handleDrag = (event: MouseEvent) => {\n  if (!isDragging.value || !waveformRef.value) return\n\n  const rect = waveformRef.value.getBoundingClientRect()\n  const deltaX = event.clientX - dragStartX.value\n  const viewportDeltaPercent = (deltaX / rect.width) * 100\n\n  // 对于 range 和 start/end 拖动，使用拖动开始时的视口宽度\n  const viewWidth = dragStartViewEnd.value - dragStartViewStart.value\n  const globalDeltaPercent = (viewportDeltaPercent / 100) * viewWidth\n\n  const minSelection = (10 / props.totalDuration) * 100 // 最小10秒\n\n  if (isDragging.value === 'start') {\n    let newStart = dragStartSelectionStart.value + globalDeltaPercent\n    newStart = Math.max(0, Math.min(newStart, selectionEnd.value - minSelection))\n    selectionStart.value = newStart\n  } else if (isDragging.value === 'end') {\n    let newEnd = dragStartSelectionEnd.value + globalDeltaPercent\n    newEnd = Math.min(100, Math.max(newEnd, selectionStart.value + minSelection))\n    selectionEnd.value = newEnd\n  } else if (isDragging.value === 'range') {\n    const rangeWidth = dragStartSelectionEnd.value - dragStartSelectionStart.value\n    let newStart = dragStartSelectionStart.value + globalDeltaPercent\n    let newEnd = dragStartSelectionEnd.value + globalDeltaPercent\n\n    // 边界检查 - 确保范围宽度保持不变\n    if (newStart < 0) {\n      newStart = 0\n      newEnd = newStart + rangeWidth\n    } else if (newEnd > 100) {\n      newEnd = 100\n      newStart = newEnd - rangeWidth\n    }\n\n    selectionStart.value = newStart\n    selectionEnd.value = newEnd\n  } else if (isDragging.value === 'pan') {\n    let newViewStart = dragStartViewStart.value - globalDeltaPercent\n    let newViewEnd = dragStartViewEnd.value - globalDeltaPercent\n\n    if (newViewStart < 0) {\n      newViewStart = 0\n      newViewEnd = viewWidth\n    }\n    if (newViewEnd > 100) {\n      newViewEnd = 100\n      newViewStart = 100 - viewWidth\n    }\n\n    viewStart.value = newViewStart\n    viewEnd.value = newViewEnd\n  }\n}\n\nconst stopDrag = () => {\n  isDragging.value = null\n  justFinishedDrag.value = true\n\n  // 100ms 后清除标志，防止拖动后立即触发点击\n  setTimeout(() => {\n    justFinishedDrag.value = false\n  }, 100)\n\n  document.removeEventListener('mousemove', handleDrag)\n  document.removeEventListener('mouseup', stopDrag)\n}\n\n// 点击波形区域直接设置位置\nconst handleWaveformClick = (event: MouseEvent) => {\n  // 防止拖动后立即触发点击\n  if (isDragging.value || justFinishedDrag.value || !waveformRef.value) return\n\n  const rect = waveformRef.value.getBoundingClientRect()\n  const clickViewportPercent = ((event.clientX - rect.left) / rect.width) * 100\n  const clickGlobalPercent = viewportToGlobal(clickViewportPercent)\n\n  // 判断点击位置更接近哪个手柄\n  const distToStart = Math.abs(clickGlobalPercent - selectionStart.value)\n  const distToEnd = Math.abs(clickGlobalPercent - selectionEnd.value)\n\n  const minSelection = (10 / props.totalDuration) * 100 // 最小10秒\n\n  if (distToStart < distToEnd) {\n    selectionStart.value = Math.max(0, Math.min(clickGlobalPercent, selectionEnd.value - minSelection))\n  } else {\n    selectionEnd.value = Math.min(100, Math.max(clickGlobalPercent, selectionStart.value + minSelection))\n  }\n}\n\n// 滚轮缩放\nconst handleWheel = (event: WheelEvent) => {\n  event.preventDefault()\n\n  const rect = waveformRef.value?.getBoundingClientRect()\n  if (!rect) return\n\n  const mouseX = (event.clientX - rect.left) / rect.width\n  const currentViewWidth = viewEnd.value - viewStart.value\n  const zoomFactor = event.deltaY > 0 ? 1.1 : 0.9\n\n  let newViewWidth = currentViewWidth * zoomFactor\n  newViewWidth = Math.max(10, Math.min(100, newViewWidth)) // 最小显示10%，最大100%\n\n  const mouseGlobalPercent = viewStart.value + mouseX * currentViewWidth\n  const newViewStart = mouseGlobalPercent - mouseX * newViewWidth\n  const newViewEnd = mouseGlobalPercent + (1 - mouseX) * newViewWidth\n\n  viewStart.value = Math.max(0, newViewStart)\n  viewEnd.value = Math.min(100, newViewEnd)\n\n  // 确保视口宽度正确\n  if (viewStart.value === 0) {\n    viewEnd.value = Math.min(100, newViewWidth)\n  }\n  if (viewEnd.value === 100) {\n    viewStart.value = Math.max(0, 100 - newViewWidth)\n  }\n}\n\n// 快速导航到选择区域\nconst scrollToSelection = () => {\n  const selectionCenter = (selectionStart.value + selectionEnd.value) / 2\n  const viewWidth = viewEnd.value - viewStart.value\n  let newViewStart = selectionCenter - viewWidth / 2\n  let newViewEnd = selectionCenter + viewWidth / 2\n\n  if (newViewStart < 0) {\n    newViewStart = 0\n    newViewEnd = viewWidth\n  }\n  if (newViewEnd > 100) {\n    newViewEnd = 100\n    newViewStart = 100 - viewWidth\n  }\n\n  viewStart.value = newViewStart\n  viewEnd.value = newViewEnd\n}\n\n// 缩放控制\nconst zoomIn = () => {\n  const center = (viewStart.value + viewEnd.value) / 2\n  const currentWidth = viewEnd.value - viewStart.value\n  const newWidth = Math.max(10, currentWidth * 0.7)\n\n  viewStart.value = Math.max(0, center - newWidth / 2)\n  viewEnd.value = Math.min(100, center + newWidth / 2)\n}\n\nconst zoomOut = () => {\n  const center = (viewStart.value + viewEnd.value) / 2\n  const currentWidth = viewEnd.value - viewStart.value\n  const newWidth = Math.min(100, currentWidth * 1.4)\n\n  viewStart.value = Math.max(0, center - newWidth / 2)\n  viewEnd.value = Math.min(100, center + newWidth / 2)\n}\n\nconst resetZoom = () => {\n  viewStart.value = 0\n  viewEnd.value = 100\n}\n\nconst verificationText = ref('Hello, this is a test of my cloned voice. I hope it sounds natural and authentic.')\nconst maxChars = 200\n\nconst canPreview = computed(() => verificationText.value.length > 0 && selectedDurationSeconds.value >= 10)\n\n// 音频播放控制\nconst togglePlayback = () => {\n  if (!audioRef.value) return\n\n  if (isPlaying.value) {\n    audioRef.value.pause()\n  } else {\n    // 设置播放范围\n    const startSeconds = (selectionStart.value / 100) * actualDuration.value\n    audioRef.value.currentTime = startSeconds\n    audioRef.value.play()\n  }\n}\n\nconst handleAudioPlay = () => {\n  isPlaying.value = true\n}\n\nconst handleAudioPause = () => {\n  isPlaying.value = false\n}\n\nconst handleAudioTimeUpdate = () => {\n  if (!audioRef.value) return\n\n  playbackTime.value = audioRef.value.currentTime\n\n  // 如果播放超过了选择区域的结束时间，暂停\n  const endSeconds = (selectionEnd.value / 100) * actualDuration.value\n  if (audioRef.value.currentTime >= endSeconds) {\n    audioRef.value.pause()\n    audioRef.value.currentTime = (selectionStart.value / 100) * actualDuration.value\n  }\n}\n\nconst handleAudioLoadedMetadata = () => {\n  if (audioRef.value) {\n    actualDuration.value = audioRef.value.duration\n  }\n}\n\nconst handleAudioEnded = () => {\n  isPlaying.value = false\n}\n\n// 当前播放位置在视口中的百分比\nconst playbackViewportPosition = computed(() => {\n  const playbackGlobalPercent = (playbackTime.value / actualDuration.value) * 100\n  return globalToViewport(playbackGlobalPercent)\n})\n\n// 是否在播放选择区域内\nconst isPlaybackInSelection = computed(() => {\n  const playbackGlobalPercent = (playbackTime.value / actualDuration.value) * 100\n  return playbackGlobalPercent >= selectionStart.value && playbackGlobalPercent <= selectionEnd.value\n})\n\nconst emit = defineEmits<{\n  (e: 'back'): void\n  (e: 'close'): void\n  (e: 'get-more'): void\n  (e: 'remove-file'): void\n  (e: 'preview-clone', selection: { start: number; end: number }): void\n}>()\n\nconst handlePreview = () => {\n  if (canPreview.value) {\n    emit('preview-clone', {\n      start: (selectionStart.value / 100) * props.totalDuration,\n      end: (selectionEnd.value / 100) * props.totalDuration\n    })\n  }\n}\n</script>\n\n<template>\n  <div class=\"w-[560px] bg-white rounded-[10px] overflow-hidden\">\n    <!-- Header -->\n    <div class=\"h-[49px] px-[30px] flex items-center border-b border-[#00000008]\">\n      <button\n        class=\"flex items-center gap-1.5 text-[#202123] hover:text-[#695fee] transition-colors cursor-pointer\"\n        @click=\"emit('back')\"\n      >\n        <UIcon name=\"i-lucide-arrow-left\" class=\"w-4 h-4\" />\n        <span class=\"text-[13px] font-medium font-['Reddit_Sans']\">Back</span>\n      </button>\n      <h1 class=\"text-[15px] font-semibold text-[#202123] font-['Reddit_Sans'] ml-4\">Dubbing Studio</h1>\n      <button\n        class=\"ml-auto text-[#979797] hover:text-[#202123] transition-colors cursor-pointer\"\n        @click=\"emit('close')\"\n      >\n        <UIcon name=\"i-lucide-x\" class=\"w-5 h-5\" />\n      </button>\n    </div>\n\n    <!-- Content -->\n    <div class=\"px-[30px] py-5\">\n      <!-- Available Clones Card -->\n      <div class=\"w-[500px] h-[70px] rounded-xl bg-[#f7f9fe] flex items-center px-5\">\n        <div class=\"w-10 h-10 rounded-[10px] bg-[#eef0ff] flex items-center justify-center\">\n          <UIcon name=\"i-lucide-sparkles\" class=\"w-5 h-5 text-[#695fee]\" />\n        </div>\n        <div class=\"ml-3 flex-1\">\n          <p class=\"text-sm font-semibold text-[#202123] font-['Reddit_Sans']\">Available Clones</p>\n          <p class=\"text-[13px] font-['Reddit_Sans'] mt-0.5\">\n            <span class=\"text-[#979797]\">Remaining: </span>\n            <span class=\"text-[#202123] font-semibold\">{{ availableClones }}</span>\n            <span class=\"text-[#979797]\"> / {{ totalClones }}</span>\n          </p>\n        </div>\n        <button\n          class=\"h-9 px-5 rounded-[18px] bg-[#695fee] flex items-center gap-1.5 text-white text-xs font-semibold font-['Reddit_Sans'] cursor-pointer hover:opacity-90 active:scale-[0.98] transition-all\"\n          @click=\"emit('get-more')\"\n        >\n          <UIcon name=\"i-lucide-plus\" class=\"w-3.5 h-3.5\" />\n          Get More\n        </button>\n      </div>\n\n      <!-- Upload Reference Audio -->\n      <h2 class=\"text-sm font-semibold text-[#202123] font-['Reddit_Sans'] mt-5 mb-3\">\n        Upload Reference Audio\n      </h2>\n\n      <!-- Hidden Audio Element -->\n      <audio\n        ref=\"audioRef\"\n        :src=\"effectiveAudioUrl\"\n        class=\"hidden\"\n        @play=\"handleAudioPlay\"\n        @pause=\"handleAudioPause\"\n        @timeupdate=\"handleAudioTimeUpdate\"\n        @loadedmetadata=\"handleAudioLoadedMetadata\"\n        @ended=\"handleAudioEnded\"\n      />\n\n      <!-- Uploaded File Card -->\n      <div class=\"w-[500px] rounded-xl border border-[#4caf50] bg-[#f1f8e9] p-3.5\">\n        <!-- File Info Row -->\n        <div class=\"flex items-center mb-3\">\n          <!-- Play Button -->\n          <button\n            class=\"w-11 h-11 rounded-[10px] bg-[#e8f5e9] flex items-center justify-center hover:bg-[#c8e6c9] transition-colors cursor-pointer\"\n            @click=\"togglePlayback\"\n          >\n            <UIcon\n              :name=\"isPlaying ? 'i-lucide-pause' : 'i-lucide-play'\"\n              class=\"w-[22px] h-[22px] text-[#4caf50]\"\n              :class=\"isPlaying ? '' : 'ml-0.5'\"\n            />\n          </button>\n          <div class=\"ml-3 flex-1\">\n            <p class=\"text-sm font-semibold text-[#202123] font-['Reddit_Sans']\">{{ fileName }}</p>\n            <p class=\"text-xs text-[#979797] font-['Reddit_Sans'] mt-0.5\">{{ fileSize }} • {{ totalDurationLabel }}</p>\n          </div>\n          <div class=\"w-6 h-6 rounded-full bg-[#4caf50] flex items-center justify-center\">\n            <UIcon name=\"i-lucide-check\" class=\"w-3.5 h-3.5 text-white\" />\n          </div>\n          <button\n            class=\"ml-3 text-[#979797] hover:text-[#e53935] transition-colors cursor-pointer\"\n            @click=\"emit('remove-file')\"\n          >\n            <UIcon name=\"i-lucide-x\" class=\"w-[18px] h-[18px]\" />\n          </button>\n        </div>\n\n        <!-- Mini Overview (全局视图) -->\n        <div class=\"w-full h-6 rounded bg-[#e8f5e9] relative mb-2 cursor-pointer\" @click=\"scrollToSelection\">\n          <!-- 选择区域指示器 -->\n          <div\n            class=\"absolute top-0 h-full bg-[#4caf50]/40 rounded-sm\"\n            :style=\"{\n              left: selectionStart + '%',\n              width: (selectionEnd - selectionStart) + '%'\n            }\"\n          />\n          <!-- 当前视口指示器 -->\n          <div\n            class=\"absolute top-0 h-full border-2 border-[#4caf50] rounded-sm bg-white/30\"\n            :style=\"{\n              left: viewStart + '%',\n              width: (viewEnd - viewStart) + '%'\n            }\"\n          />\n          <!-- 迷你波形 -->\n          <div class=\"absolute inset-0 flex items-center justify-around px-1 pointer-events-none opacity-50\">\n            <div\n              v-for=\"(height, i) in waveformData.filter((_, idx) => idx % 4 === 0)\"\n              :key=\"i\"\n              class=\"w-px rounded-sm bg-[#4caf50]\"\n              :style=\"{ height: Math.max(2, height / 4) + 'px' }\"\n            />\n          </div>\n        </div>\n\n        <!-- Zoom Controls -->\n        <div class=\"flex items-center justify-between mb-2\">\n          <div class=\"flex items-center gap-1\">\n            <button\n              class=\"w-6 h-6 rounded bg-white border border-[#d0d0d0] flex items-center justify-center text-[#4caf50] hover:bg-[#e8f5e9] transition-colors cursor-pointer\"\n              @click=\"zoomOut\"\n              title=\"Zoom Out\"\n            >\n              <UIcon name=\"i-lucide-zoom-out\" class=\"w-3.5 h-3.5\" />\n            </button>\n            <button\n              class=\"w-6 h-6 rounded bg-white border border-[#d0d0d0] flex items-center justify-center text-[#4caf50] hover:bg-[#e8f5e9] transition-colors cursor-pointer\"\n              @click=\"zoomIn\"\n              title=\"Zoom In\"\n            >\n              <UIcon name=\"i-lucide-zoom-in\" class=\"w-3.5 h-3.5\" />\n            </button>\n            <button\n              class=\"px-2 h-6 rounded bg-white border border-[#d0d0d0] flex items-center justify-center text-[10px] text-[#4caf50] hover:bg-[#e8f5e9] transition-colors cursor-pointer font-medium\"\n              @click=\"resetZoom\"\n              title=\"Reset Zoom\"\n            >\n              {{ zoomLevel.toFixed(1) }}x\n            </button>\n          </div>\n          <div class=\"flex items-center gap-2\">\n            <span class=\"text-[10px] text-[#81c784] font-['Reddit_Sans']\">\n              {{ formatTime((viewStart / 100) * totalDuration) }} - {{ formatTime((viewEnd / 100) * totalDuration) }}\n            </span>\n            <button\n              v-if=\"!isSelectionVisible\"\n              class=\"px-2 h-5 rounded bg-[#4caf50] text-white text-[10px] font-medium hover:bg-[#388e3c] transition-colors cursor-pointer\"\n              @click=\"scrollToSelection\"\n            >\n              Go to Selection\n            </button>\n          </div>\n        </div>\n\n        <!-- Waveform Area -->\n        <div\n          ref=\"waveformRef\"\n          class=\"w-full h-14 rounded-md bg-[#e8f5e9] relative select-none overflow-hidden\"\n          :class=\"isDragging === 'pan' ? 'cursor-grabbing' : 'cursor-grab'\"\n          @click=\"handleWaveformClick\"\n          @mousedown=\"startDrag('pan', $event)\"\n          @wheel=\"handleWheel\"\n        >\n          <!-- Selected Range Background -->\n          <div\n            v-if=\"isSelectionVisible\"\n            class=\"absolute top-0 h-full bg-[#4caf50]/20 cursor-move\"\n            :style=\"{\n              left: Math.max(0, selectionViewportStart) + '%',\n              width: Math.min(100, selectionViewportEnd) - Math.max(0, selectionViewportStart) + '%'\n            }\"\n            @mousedown.stop=\"startDrag('range', $event)\"\n          />\n\n          <!-- Left Handle -->\n          <div\n            v-if=\"selectionViewportStart >= 0 && selectionViewportStart <= 100\"\n            class=\"absolute top-0 w-1.5 h-full bg-[#4caf50] rounded-sm cursor-ew-resize hover:bg-[#388e3c] transition-colors z-10\"\n            :style=\"{ left: `calc(${selectionViewportStart}% - 3px)` }\"\n            @mousedown.stop=\"startDrag('start', $event)\"\n          >\n            <div class=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-8 rounded bg-[#4caf50] hover:bg-[#388e3c] flex items-center justify-center shadow-md\">\n              <div class=\"flex gap-0.5\">\n                <div class=\"w-0.5 h-4 bg-white/60 rounded\" />\n                <div class=\"w-0.5 h-4 bg-white/60 rounded\" />\n              </div>\n            </div>\n          </div>\n\n          <!-- Right Handle -->\n          <div\n            v-if=\"selectionViewportEnd >= 0 && selectionViewportEnd <= 100\"\n            class=\"absolute top-0 w-1.5 h-full bg-[#4caf50] rounded-sm cursor-ew-resize hover:bg-[#388e3c] transition-colors z-10\"\n            :style=\"{ left: `calc(${selectionViewportEnd}% - 3px)` }\"\n            @mousedown.stop=\"startDrag('end', $event)\"\n          >\n            <div class=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-8 rounded bg-[#4caf50] hover:bg-[#388e3c] flex items-center justify-center shadow-md\">\n              <div class=\"flex gap-0.5\">\n                <div class=\"w-0.5 h-4 bg-white/60 rounded\" />\n                <div class=\"w-0.5 h-4 bg-white/60 rounded\" />\n              </div>\n            </div>\n          </div>\n\n          <!-- Waveform Bars -->\n          <div class=\"absolute inset-0 flex items-center justify-around px-2 pointer-events-none\">\n            <div\n              v-for=\"(height, i) in visibleWaveformData\"\n              :key=\"i\"\n              class=\"w-0.5 rounded-sm transition-colors duration-100\"\n              :class=\"isBarSelected(i, visibleWaveformData.length) ? 'bg-[#4caf50]' : 'bg-[#81c784]'\"\n              :style=\"{ height: height + 'px' }\"\n            />\n          </div>\n\n          <!-- Playhead Indicator -->\n          <div\n            v-if=\"isPlaying && playbackViewportPosition >= 0 && playbackViewportPosition <= 100\"\n            class=\"absolute top-0 w-0.5 h-full bg-[#e53935] z-20 pointer-events-none transition-all duration-75\"\n            :style=\"{ left: playbackViewportPosition + '%' }\"\n          >\n            <div class=\"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 rounded-full bg-[#e53935]\" />\n          </div>\n\n          <!-- Pan Hint Overlay -->\n          <div\n            v-if=\"isDragging === 'pan'\"\n            class=\"absolute inset-0 bg-black/5 flex items-center justify-center pointer-events-none\"\n          >\n            <UIcon name=\"i-lucide-move-horizontal\" class=\"w-6 h-6 text-[#4caf50]/50\" />\n          </div>\n        </div>\n\n        <!-- Time Labels -->\n        <div class=\"flex items-center mt-2 relative h-5\">\n          <!-- Start Time Label -->\n          <span\n            v-if=\"selectionViewportStart >= -10 && selectionViewportStart <= 110\"\n            class=\"absolute text-[11px] font-semibold text-[#4caf50] font-['Reddit_Sans'] -translate-x-1/2 whitespace-nowrap\"\n            :style=\"{ left: Math.max(5, Math.min(95, selectionViewportStart)) + '%' }\"\n          >\n            {{ startTimeLabel }}\n          </span>\n          <!-- End Time Label -->\n          <span\n            v-if=\"selectionViewportEnd >= -10 && selectionViewportEnd <= 110\"\n            class=\"absolute text-[11px] font-semibold text-[#4caf50] font-['Reddit_Sans'] -translate-x-1/2 whitespace-nowrap\"\n            :style=\"{ left: Math.max(5, Math.min(95, selectionViewportEnd)) + '%' }\"\n          >\n            {{ endTimeLabel }}\n          </span>\n          <!-- Selected Duration -->\n          <span class=\"absolute right-0 text-[11px] text-[#979797] font-['Reddit_Sans']\">\n            Selected: {{ selectedDurationSeconds }}s\n          </span>\n        </div>\n\n        <!-- Hint Text -->\n        <p class=\"text-[10px] text-[#81c784] font-['Reddit_Sans'] mt-2 text-center\">\n          Drag handles to select • Drag waveform to pan • Scroll to zoom\n        </p>\n      </div>\n\n      <!-- Input Verification Text -->\n      <h2 class=\"text-sm font-semibold text-[#202123] font-['Reddit_Sans'] mt-5 mb-3\">\n        Input Verification Text (To verify clone effect)\n      </h2>\n\n      <div class=\"relative\">\n        <textarea\n          v-model=\"verificationText\"\n          :maxlength=\"maxChars\"\n          placeholder=\"Enter short text to verify clone...\"\n          class=\"w-[500px] h-[100px] rounded-lg border border-[#e5e5e5] bg-[#f7f9fe] px-4 py-4 text-[13px] text-[#202123] font-['Reddit_Sans'] placeholder:text-[#b0b0b0] resize-none focus:outline-none focus:border-[#695fee]\"\n        />\n        <span class=\"absolute bottom-[-24px] right-0 text-xs text-[#979797] font-['Reddit_Sans']\">\n          {{ verificationText.length }}/{{ maxChars }} chars\n        </span>\n      </div>\n\n      <!-- Preview Clone Button -->\n      <button\n        class=\"w-[500px] h-11 rounded-[22px] text-white text-sm font-semibold font-['Reddit_Sans'] flex items-center justify-center mt-10 transition-all\"\n        :class=\"canPreview\n          ? 'bg-[#695fee] hover:bg-[#5a4fdf] cursor-pointer active:scale-[0.98]'\n          : 'bg-[#c5c5c5] cursor-not-allowed'\"\n        :disabled=\"!canPreview\"\n        @click=\"handlePreview\"\n      >\n        Preview Clone\n      </button>\n    </div>\n  </div>\n</template>\n",
  "PurchaseClonesModal.vue": "<script setup lang=\"ts\">\ninterface Plan {\n  id: string\n  name: string\n  price: string\n  priceLabel: string\n  description: string\n  clones: string\n  iconColor: string\n  iconBgColor: string\n  badgeColor: string\n  badgeBgColor: string\n  icon: string\n  bestValue?: boolean\n}\n\nconst plans: Plan[] = [\n  {\n    id: 'pro-annual',\n    name: 'Pro Annual',\n    price: '$99',\n    priceLabel: '$99/year',\n    description: 'Includes 2 free clones',\n    clones: '+2 Clones',\n    iconColor: 'text-[#ff9800]',\n    iconBgColor: 'bg-[#fff3e0]',\n    badgeColor: 'text-[#ff9800]',\n    badgeBgColor: 'bg-[#fff3e0]',\n    icon: 'i-lucide-star'\n  },\n  {\n    id: 'unlimited-monthly',\n    name: 'Unlimited Monthly',\n    price: '$19',\n    priceLabel: '$19/month',\n    description: 'Includes 1 free clone',\n    clones: '+1 Clone',\n    iconColor: 'text-[#695fee]',\n    iconBgColor: 'bg-[#eef0ff]',\n    badgeColor: 'text-[#695fee]',\n    badgeBgColor: 'bg-[#eef0ff]',\n    icon: 'i-lucide-crown'\n  },\n  {\n    id: 'unlimited-annual',\n    name: 'Unlimited Annual',\n    price: '$149',\n    priceLabel: '$149/year',\n    description: 'Includes 6 free clones',\n    clones: '+6 Clones',\n    iconColor: 'text-[#4caf50]',\n    iconBgColor: 'bg-[#e8f5e9]',\n    badgeColor: 'text-[#4caf50]',\n    badgeBgColor: 'bg-[#e8f5e9]',\n    icon: 'i-lucide-crown',\n    bestValue: true\n  }\n]\n\nconst selectedPlan = ref('unlimited-monthly')\nconst isProcessing = ref(false)\nconst error = ref('')\n\nconst selectedPlanData = computed(() => plans.find(p => p.id === selectedPlan.value))\n\n// 计算节省的金额\nconst savingsInfo = computed(() => {\n  const plan = selectedPlanData.value\n  if (!plan) return null\n\n  // 计算相比单独购买的节省\n  const cloneCount = parseInt(plan.clones.replace(/[^0-9]/g, '')) || 0\n  const singleClonePrice = 2.99\n  const regularPrice = cloneCount * singleClonePrice\n  const actualPrice = parseFloat(plan.price.replace('$', ''))\n  const savings = regularPrice - actualPrice\n\n  return {\n    cloneCount,\n    regularPrice,\n    actualPrice,\n    savings: savings > 0 ? savings : 0\n  }\n})\n\nconst emit = defineEmits<{\n  (e: 'close'): void\n  (e: 'continue', data: { planId: string; planData: Plan }): void\n  (e: 'buy-clones'): void\n}>()\n\n// 继续购买\nconst handleContinue = async () => {\n  if (!selectedPlanData.value || isProcessing.value) return\n\n  isProcessing.value = true\n  error.value = ''\n\n  try {\n    // 模拟处理延迟\n    await new Promise(resolve => setTimeout(resolve, 500))\n\n    emit('continue', {\n      planId: selectedPlan.value,\n      planData: selectedPlanData.value\n    })\n  } catch (e) {\n    error.value = 'Failed to process. Please try again.'\n    console.error(e)\n  } finally {\n    isProcessing.value = false\n  }\n}\n</script>\n\n<template>\n  <div class=\"w-[420px] bg-white rounded-2xl overflow-hidden\">\n    <!-- Header -->\n    <div class=\"h-14 px-6 flex items-center justify-between border-b border-[#e5e5e5]\">\n      <h1 class=\"text-base font-semibold text-[#202123] font-['Reddit_Sans']\">Get More Clones</h1>\n      <button\n        class=\"text-[#979797] hover:text-[#202123] transition-colors cursor-pointer\"\n        @click=\"emit('close')\"\n      >\n        <UIcon name=\"i-lucide-x\" class=\"w-5 h-5\" />\n      </button>\n    </div>\n\n    <!-- Content -->\n    <div class=\"px-6 py-4\">\n      <!-- Upgrade Plan Section -->\n      <h2 class=\"text-[13px] font-semibold text-[#202123] font-['Reddit_Sans'] mb-4\">Upgrade Plan</h2>\n\n      <div class=\"flex flex-col gap-2\">\n        <!-- Plan Cards -->\n        <button\n          v-for=\"plan in plans\"\n          :key=\"plan.id\"\n          class=\"relative w-full h-[90px] rounded-xl px-4 flex items-center transition-all cursor-pointer\"\n          :class=\"[\n            selectedPlan === plan.id\n              ? 'bg-[#f0eeff] border-2 border-[#695fee]'\n              : 'bg-[#f7f9fe] border border-[#e5e5e5]'\n          ]\"\n          @click=\"selectedPlan = plan.id\"\n        >\n          <!-- Best Value Tag -->\n          <span\n            v-if=\"plan.bestValue\"\n            class=\"absolute top-1.5 right-4 px-2.5 py-1 rounded-[10px] bg-[#4caf50] text-white text-[10px] font-semibold\"\n          >\n            Best Value\n          </span>\n\n          <!-- Radio -->\n          <div\n            class=\"w-5 h-5 rounded-full border-2 flex items-center justify-center shrink-0\"\n            :class=\"selectedPlan === plan.id ? 'border-[#695fee] bg-[#695fee]' : 'border-[#d0d0d0] bg-white'\"\n          >\n            <div v-if=\"selectedPlan === plan.id\" class=\"w-2 h-2 rounded-full bg-white\" />\n          </div>\n\n          <!-- Icon -->\n          <div\n            class=\"w-8 h-8 rounded-lg flex items-center justify-center ml-3 shrink-0\"\n            :class=\"plan.iconBgColor\"\n          >\n            <UIcon :name=\"plan.icon\" class=\"w-[18px] h-[18px]\" :class=\"plan.iconColor\" />\n          </div>\n\n          <!-- Info -->\n          <div class=\"ml-2 flex-1 text-left\">\n            <p class=\"text-sm font-semibold text-[#202123] font-['Reddit_Sans']\">{{ plan.name }}</p>\n            <p class=\"text-xs text-[#979797] font-['Reddit_Sans'] mt-0.5\">{{ plan.priceLabel }} • {{ plan.description }}</p>\n            <span\n              class=\"inline-block mt-1.5 px-2.5 py-0.5 rounded-[10px] text-[10px] font-semibold\"\n              :class=\"[plan.badgeBgColor, plan.badgeColor]\"\n            >\n              {{ plan.clones }}\n            </span>\n          </div>\n\n          <!-- Price -->\n          <span class=\"text-base font-semibold text-[#202123] font-['Reddit_Sans'] shrink-0\">{{ plan.price }}</span>\n        </button>\n      </div>\n\n      <!-- Divider -->\n      <div class=\"h-px bg-[#e5e5e5] my-6\" />\n\n      <!-- Buy Clones Separately -->\n      <h2 class=\"text-[13px] font-semibold text-[#202123] font-['Reddit_Sans'] mb-4\">Or Buy Clones Separately</h2>\n\n      <button\n        class=\"w-full h-16 rounded-xl bg-white border border-[#e5e5e5] px-4 flex items-center hover:bg-gray-50 transition-colors cursor-pointer\"\n        @click=\"emit('buy-clones')\"\n      >\n        <div class=\"w-10 h-10 rounded-[10px] bg-[#f0f7ff] flex items-center justify-center shrink-0\">\n          <UIcon name=\"i-lucide-coins\" class=\"w-5 h-5 text-[#3b82f6]\" />\n        </div>\n        <div class=\"ml-3 flex-1 text-left\">\n          <p class=\"text-sm font-semibold text-[#202123] font-['Reddit_Sans']\">Buy Clones</p>\n          <p class=\"text-xs text-[#979797] font-['Reddit_Sans']\">Starting from $2.99 each</p>\n        </div>\n        <UIcon name=\"i-lucide-chevron-right\" class=\"w-[18px] h-[18px] text-[#979797]\" />\n      </button>\n    </div>\n\n    <!-- Error Message -->\n    <div v-if=\"error\" class=\"px-6 pb-2\">\n      <p class=\"text-xs text-[#e53935] font-['Reddit_Sans'] text-center\">{{ error }}</p>\n    </div>\n\n    <!-- Savings Info -->\n    <div v-if=\"savingsInfo && savingsInfo.savings > 0\" class=\"px-6 pb-4\">\n      <div class=\"bg-[#e8f5e9] rounded-lg p-3 flex items-center justify-center gap-2\">\n        <UIcon name=\"i-lucide-piggy-bank\" class=\"w-4 h-4 text-[#4caf50]\" />\n        <span class=\"text-sm text-[#4caf50] font-medium font-['Reddit_Sans']\">\n          You save ${{ savingsInfo.savings.toFixed(2) }} compared to buying {{ savingsInfo.cloneCount }} clones separately\n        </span>\n      </div>\n    </div>\n\n    <!-- Footer Button -->\n    <div class=\"px-6 pb-6\">\n      <button\n        class=\"w-full h-12 rounded-3xl bg-[#695fee] hover:bg-[#5a4fdf] text-white text-sm font-semibold font-['Reddit_Sans'] flex items-center justify-center cursor-pointer active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n        :disabled=\"isProcessing\"\n        @click=\"handleContinue\"\n      >\n        <UIcon v-if=\"isProcessing\" name=\"i-lucide-loader-2\" class=\"w-4 h-4 mr-2 animate-spin\" />\n        {{ isProcessing ? 'Processing...' : `Continue - ${selectedPlanData?.priceLabel}` }}\n      </button>\n    </div>\n  </div>\n</template>\n"
}